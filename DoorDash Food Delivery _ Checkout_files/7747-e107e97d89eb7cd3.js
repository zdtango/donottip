"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7747],{874383:function(e,t,n){var i,r;n.d(t,{Mo:function(){return i},sS:function(){return a},xI:function(){return l}});let a={bpData:["business-profile-data"]};(r=i||(i={})).CREATE_BUSINESS_PROFILE="CREATE_BUSINESS_PROFILE",r.EDIT_BUSINESS_PROFILE="EDIT_BUSINESS_PROFILE",r.EDIT_PAYMENT_METHOD="EDIT_PAYMENT_METHOD",r.BP_CREATION_SUCCESS="BP_CREATION_SUCCESS",r.LINK_EXPENSE_PROVIDER="LINK_EXPENSE_PROVIDER",r.CONCUR_LINKING_SUCCESS="CONCUR_LINKING_SUCCESS",r.CONCUR_UNLINK_CONFIRMATION="CONCUR_UNLINK_CONFIRMATION",r.USER_FEEDBACK="USER_FEEDBACK",r.EMAIL_VERIFICATION_INPUT="EMAIL_VERIFICATION_INPUT",r.ONE_TIME_CODE_VERIFICATION="ONE_TIME_CODE_VERIFICATION";let l="#F0AB00"},571926:function(e,t,n){n.d(t,{A:function(){return u}});var i=n(972437),r=n(481582),a=n.n(r),l=n(880021),o=n(874383);let u=function(e){let{consumerId:t}=e,n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],[r]=(0,l.wj)(a()),{data:u,isLoading:s,error:d,refetch:c}=(0,i.useQuery)({queryFn:()=>r.getConsumerBusinessProfileV1BusinessProfiles({consumerId:t}),queryKey:o.sS.bpData,enabled:n});return{data:u,isLoading:s,error:d,refetch:c}}},425869:function(e,t,n){n.d(t,{Bo:function(){return I},JQ:function(){return h},Je:function(){return C},SF:function(){return D},Wp:function(){return y},Z0:function(){return S},bJ:function(){return p},ce:function(){return T},d2:function(){return m},j9:function(){return P},kZ:function(){return O},or:function(){return g},to:function(){return E}});var i=n(42976),r=n(565872),a=n(361040),l=n(980928),o=n(910030),u=n(533824),s=n(680197);let d=e=>{var t,n,i;let r=(null!==(n=null==e?void 0:e.lineItemsList)&&void 0!==n?n:[]).find(e=>e.chargeId===l.k1p.SUBTOTAL)||null;return null!==(i=null==r?void 0:null===(t=r.finalMoney)||void 0===t?void 0:t.unitAmount)&&void 0!==i?i:0},c=e=>{var t;return null!==(t=null==e?void 0:e.subtotal)&&void 0!==t?t:0},v=e=>{var t;return Array.isArray(null!==(t=null==e?void 0:e.lineItemsList)&&void 0!==t?t:null)},p=e=>{var t,n,i;let r=v(e)?d(e):c(e),a=null!==(n=null==e?void 0:null===(t=e.cateringInfo)||void 0===t?void 0:t.minOrderSize)&&void 0!==n?n:0;return null!==(i=null==e?void 0:e.isCatering)&&void 0!==i&&i&&r<a},m=e=>{var t,n,i;let r=v(e)?d(e):c(e),a=null!==(n=null==e?void 0:null===(t=e.cateringInfo)||void 0===t?void 0:t.maxOrderSize)&&void 0!==n?n:0;return null!==(i=null==e?void 0:e.isCatering)&&void 0!==i&&i&&a>0&&r>a},h=(e,t)=>{var n;return!!(t&&(null==e?void 0:e.isCatering)&&(null==e?void 0:null===(n=e.cateringInfo)||void 0===n?void 0:n.orderInAdvanceInSeconds))},y=e=>{var t;return!!((null==e?void 0:e.isCatering)&&(null==e?void 0:null===(t=e.cateringInfo)||void 0===t?void 0:t.cancelOrderInAdvanceInSeconds))},C=e=>{var t,n,i;let r=null!==(n=null==e?void 0:e.isCatering)&&void 0!==n&&n,a=null!==(i=null==e?void 0:null===(t=e.cateringInfo)||void 0===t?void 0:t.maxOrderSize)&&void 0!==i?i:0;return r&&a>0},_=(e,t,n)=>(0,i.lb)({unitAmount:e,currency:t,userLocale:n,concise:!1}),A=(e,t,n)=>a.ZP.t("layoutStrings_orderCart_catering_belowMinimum",{amount:_(e,t,n)}),f=(e,t,n)=>a.ZP.t("layoutStrings_orderCart_catering_aboveMaximum",{amount:_(e,t,n)}),S=(e,t)=>{var n,i;let r=(null===(n=e.cateringInfo)||void 0===n?void 0:n.minOrderSize)||0,a=(null===(i=e.cateringInfo)||void 0===i?void 0:i.maxOrderSize)||0,l=e.currencyCode||o.EJ;return p(e)?A(r,l,t):m(e)?f(a,l,t):null},E=e=>p(e)||m(e),P=e=>{var t,n,i,r;return(null==e?void 0:e.isCatering)&&(null==e?void 0:null===(t=e.cateringInfo)||void 0===t?void 0:t.orderInAdvanceInSeconds)?{storeName:(null==e?void 0:null===(i=e.restaurant)||void 0===i?void 0:null===(n=i.business)||void 0===n?void 0:n.name)||"",numHours:Math.ceil(((null==e?void 0:null===(r=e.cateringInfo)||void 0===r?void 0:r.orderInAdvanceInSeconds)||0)/3600)}:null},I=(e,t)=>{var n;return!!((null==e?void 0:e.isCatering)&&(null==e?void 0:null===(n=e.cateringInfo)||void 0===n?void 0:n.orderInAdvanceInSeconds)&&t)},g=(e,t,n)=>a.ZP.t("layoutStrings_orderCart_catering_cartSummary_minAmount",{amount:_(e,t,n)}),T=(e,t,n)=>a.ZP.t("layoutStrings_orderCart_catering_cartSummary_maxAmount",{amount:_(e,t,n)}),O=e=>{var t;return a.ZP.t("layoutStrings_orderCart_catering_cartSummary_scheduleAhead",{numHours:Math.ceil(((null==e?void 0:null===(t=e.cateringInfo)||void 0===t?void 0:t.orderInAdvanceInSeconds)||0)/3600)})},D=(e,t,n,i)=>{var r,l;let o=R(i,null===(r=e.cateringInfo)||void 0===r?void 0:r.orderInAdvanceInSeconds,t,n);if(o)return"Edit or cancel by ".concat(o);let u=Math.ceil(((null==e?void 0:null===(l=e.cateringInfo)||void 0===l?void 0:l.cancelOrderInAdvanceInSeconds)||0)/3600);return a.ZP.t("layoutStrings_orderCart_catering_cartSummary_cancelPolicy",{numHours:u})},R=(e,t,n,i)=>{if(!n||!i||!t||n===u.mq)return null;let a=new Date(new Date(n).getTime()-t*u.s9),l=(0,s.zA)(a,{timeZone:i,month:r.th.NUMERIC,day:r.th.NUMERIC},e),o=(0,s.zA)(a,{...r.gz.TIME.value,timeZone:i},e);return"".concat(l," ").concat(o)}},142559:function(e,t,n){var i,r;n.d(t,{O:function(){return i}}),(r=i||(i={})).EMPTY="EMPTY",r.UNSPECIFIED="UNSPECIFIED",r.GROUP_CART_PARTICIPANT_CHECKOUT="GROUP_CART_PARTICIPANT_CHECKOUT"},682852:function(e,t,n){n.d(t,{Yy:function(){return I},RV:function(){return D},ZP:function(){return N},gH:function(){return g},Gc:function(){return R}});var i=n(787536),r=n(512150),a=n(814116),l=n(398268),o=n(980928),u=n(561662),s=n(177651),d=n(185555),c=n(206916),v=n(866008);let p=(e,t,n)=>e?t:n||v.V;var m=e=>{let{consumerScheduledTime:t=v.V,shouldSyncWithConsumerTime:n=!1,preselectedScheduledTime:i=""}=e,[a,l]=r.useState(p(n,t,i)),o=r.useRef(!1),[u,s]=r.useState(a),{setCheckoutQueryScheduledTime:d}=r.useContext(c.Z),m=r.useCallback(e=>{null==d||d(e),l(e)},[d,l]),h=p(n,t,i);return r.useEffect(()=>{h&&h!==u&&!o.current&&(o.current=!0,s(h),m(h))},[h,u,o,s,m]),{localScheduledTime:a,setLocalScheduledTime:m}},h=n(639534),y=n(507449),C={__typename:"RewardBalanceDetails",monetaryValue:{__typename:"AmountMonetaryFields",currency:"USD",displayString:"$25.00",unitAmount:2500},transactionAmount:{__typename:"RewardTransactionDetails",amount:3125,label:"points",conversionRate:80}};let _=function(e,t){var n,i;let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t)return y.kz;let a=r?C:null==e?void 0:e.rewardBalanceAvailable;return(0,y.VK)({cartId:e.id,storeId:null==e?void 0:null===(n=e.restaurant)||void 0===n?void 0:n.id,currency:null==a?void 0:null===(i=a.monetaryValue)||void 0===i?void 0:i.currency})};var A=e=>{let t=(0,h.KQ)(),n=(0,y.NT)(),i=t&&n,[a,l]=r.useState(()=>_(e,i));return{dashCardPoints:a,setDashCardPoints:l}},f=n(142559),S=n(917748),E=n(497986);let P=r.createContext({});P.displayName="FormContext";let I=P.Consumer,g=(e,t,n,i)=>{var r,a;return{country:null!==(r=null==t?void 0:t.toUpperCase())&&void 0!==r?r:u.Z8.US,currency:null!==(a=null==n?void 0:n.toLowerCase())&&void 0!==a?a:"usd",requestPayerName:!0,total:{amount:e,label:i||"doordash.com"}}},T=e=>(null==e?void 0:e.menuOptions)?JSON.stringify(e.menuOptions.map(e=>e?{id:e.id,selection:e.selection}:null).filter(e=>!!e)):null;class O extends r.Component{static getDerivedStateFromProps(e,t){var n,i;let{orderCart:r}=e,a=new d.ZP(r),l=a.isPickup(),o=a.defaultTips(),u=t.isPickupOrder!==l||0===t.tips.length?o:t.tips,s=u.map(e=>e.value),c=a.total(s),v=a.debits([0]),p=v+a.sumTips(s),m=a.hasCompanyPayment()?{isApplePayAvailable:!1}:{},h=null!==(i=null===(n=r.orderTimeAvailability)||void 0===n?void 0:n.scheduleLongerInAdvanceTime)&&void 0!==i&&i;return{...t,...m,isPickupOrder:l,tips:u,totalWithoutTipBeforeCredits:v,totalWithTipBeforeCredits:p,total:c,canScheduleLongerInAdvanceTime:h}}componentDidUpdate(e){let t=e.orderCart,n=new d.ZP(t),i=n.total([0]),{orderCart:r,consumerStripeKey:a}=this.props,o=new d.ZP(r),u=o.total([0]),s=this.state.tips.map(e=>e.value);i!==u&&this.setState({total:o.total(s)}),n.hasCompanyPayment()&&!o.hasCompanyPayment()&&this.setState({workOrderOptions:null}),!this.state.stripe&&a&&(0,l.J)(this.setStripe,a)}render(){let{defaultPaymentMethod:e,localScheduledTime:t,setLocalScheduledTime:n,dashCardPoints:r,setDashCardPoints:a,isDashCardCheckoutUpsellVisible:l,showDashCardCheckoutUpsell:o,potentialDashPassRefundAmount:u,giftCardDeliveryDetailsState:s}=this.props;return(0,i.jsx)(P.Provider,{value:{...this.state,defaultPaymentMethod:e,localScheduledTime:t,setLocalScheduledTime:n,dashCardPoints:r,setDashCardPoints:a,isDashCardCheckoutUpsellVisible:l,showDashCardCheckoutUpsell:o,potentialDashPassRefundAmount:u,giftCardDeliveryDetailsState:s},children:this.props.children})}constructor(e){var t,n,i,r,l,o,c,v,p;super(e),this.handleSetApplePay=e=>{this.setState({isApplePaySelected:e})},this.handleSet=(e,t)=>{let{orderCart:n}=this.props,i=new d.ZP(n);switch(e){case"tips":let r=t.tipRecipient,a=this.state.tips.findIndex(e=>e.tipRecipient===r);if(!r||-1===a)return;let l=[...this.state.tips];l[a]=t,this.setState({tips:l,total:i.total([t.value])});break;case"verifiedAgeRequirement":this.setState({verifiedAgeRequirement:t});break;case"menuOptions":this.setState({menuOptions:t});break;case"workOrderOptions":this.setState({workOrderOptions:t});break;case"dasherPickupInstructions":this.setState({dasherPickupInstructions:t});break;default:this.setState({[e]:t})}},this.setStripe=e=>{this.setState({stripe:e});let t=g(this.state.total),n=null==e?void 0:e.paymentRequest(t);null==n||n.canMakePayment().then(e=>{let t=!!this.props.paymentCards.find(e=>e.isDefault),n=this.state.isDigitalWalletAllowed&&!!(null==e?void 0:e.applePay)&&this.props.checkoutMode!==f.O.GROUP_CART_PARTICIPANT_CHECKOUT;this.setState({isApplePayAvailable:n,isApplePaySelected:n&&!t,applePayLabel:(null==e?void 0:e.applePay)?"Apple Pay":"Google or Microsoft Pay"})})},this.setGiftOptions=e=>{this.setState({giftOptions:e})},this.launchCardBlockModal=()=>{this.setState({cardVerificationRequired:!0}),this.setShowCardBlockModal(!0)},this.setShowCardBlockModal=e=>{this.setState({showCardBlockModal:e})},this.setCardVerificationRequired=e=>{this.setState({cardVerificationRequired:e})},this.setShowCardScanAlternative=e=>{this.setState({showCardScanAlternative:e})},this.setPaymentError=e=>{this.setState({paymentError:e})},this.resetPaymentError=()=>{this.setState({paymentError:""})};let{orderCart:m,isCashTransaction:h,isDineIn:y,tableId:C}=e,_=null!==(c=null===(t=m.orderTimeAvailability)||void 0===t?void 0:t.scheduleLongerInAdvanceTime)&&void 0!==c&&c,A=new d.ZP(m),S=A.isPickup(),E=A.defaultTips(),P=E.map(e=>e.value),I=A.debits([0]),O=I+A.sumTips(P),D=A.total(P),R=null===(n=m.domain)||void 0===n?void 0:n.giftInfo,N=(null==R?void 0:R.recipientName)?(0,a.KZ)(R,!!m.isMerchantShipping):null,b=null!==(v=null===(r=m.orders)||void 0===r?void 0:null===(i=r[0])||void 0===i?void 0:i.isOrderRoutineReorderEligible)&&void 0!==v&&v;this.state={isPickupOrder:S,tips:E,giftOptions:N,totalWithoutTipBeforeCredits:I,totalWithTipBeforeCredits:O,total:D,isDigitalWalletAllowed:!1!==m.isDigitalWalletAllowed&&!h,verifiedAgeRequirement:!1,set:this.handleSet,isApplePayAvailable:!1,isApplePaySelected:!1,applePayLabel:"Apple Pay",stripe:null,setUseApplePay:this.handleSetApplePay,menuOptions:T(m),setGiftOptions:this.setGiftOptions,countryCode:(0,u.Nn)((0,s.t8)(null===(l=m.restaurant)||void 0===l?void 0:l.address)),optInSelected:!1,workOrderOptions:null,recipientShippingDetails:(0,a.E$)({orderCartCreator:null==m?void 0:m.creator,giftInfo:R}),isDineIn:y||null,tableId:C||null,membershipId:"",programId:"",canScheduleLongerInAdvanceTime:_,routineReorderDetails:null,isMerchantShipping:null!==(p=m.isMerchantShipping)&&void 0!==p&&p,storeId:(null===(o=m.restaurant)||void 0===o?void 0:o.id)||"",isOrderRoutineReorderEligible:b,hasAccessibilityRequirements:null,snapEbtProviderType:null,dasherPickupInstructions:"",cardVerificationRequired:!1,launchCardBlockModal:this.launchCardBlockModal,showCardBlockModal:!1,setShowCardBlockModal:this.setShowCardBlockModal,setCardVerificationRequired:this.setCardVerificationRequired,showCardScanAlternative:!1,setShowCardScanAlternative:this.setShowCardScanAlternative,paymentError:"",setPaymentError:this.setPaymentError,resetPaymentError:this.resetPaymentError}}}let D=e=>{var t,n,a;let{isBusinessProfileEnabled:l,isBpActive:u}=(0,E.m)(),s=e.orderCart.paymentProfileType===o.gc6.PAYMENT_PROFILE_TYPE_BUSINESS,d=l&&u&&s,c=r.useMemo(()=>{var t,n;return d?(null!==(t=e.paymentCards)&&void 0!==t?t:[]).find(e=>e.isBusinessDefault):(null!==(n=e.paymentCards)&&void 0!==n?n:[]).find(e=>e.isDefault)},[e.paymentCards,d]),v=!!(null===(t=e.orderCart)||void 0===t?void 0:t.isSameStoreCatering)||(0,S.My)((null===(a=e.orderCart)||void 0===a?void 0:null===(n=a.restaurant)||void 0===n?void 0:n.id)||""),{localScheduledTime:p,setLocalScheduledTime:h}=m({consumerScheduledTime:e.consumerScheduledTime,shouldSyncWithConsumerTime:!!e.orderCart.isCatering||v,preselectedScheduledTime:e.preselectedScheduledTime}),{dashCardPoints:y,setDashCardPoints:C}=A(e.orderCart),[_,f]=r.useState(!1);return(0,i.jsx)(O,{...e,defaultPaymentMethod:c,localScheduledTime:p,setLocalScheduledTime:h,dashCardPoints:y,setDashCardPoints:C,isDashCardCheckoutUpsellVisible:_,showDashCardCheckoutUpsell:f,potentialDashPassRefundAmount:e.potentialDashPassRefundAmount||0,giftCardDeliveryDetailsState:e.giftCardDeliveryDetailsState})},R=()=>r.useContext(P);var N=P},185555:function(e,t,n){n.d(t,{SM:function(){return i},ZP:function(){return d}}),n(736287);var i,r,a=n(122850),l=n.n(a),o=n(417864),u=n.n(o),s=n(980928);(r=i||(i={})).Tax="tax",r.MinOrderFee="min order fee",r.ServiceFee="service fee",r.TaxesAndFees="taxes and fees",r.Subtotal="subtotal",r.LegislativeFee="legislative fee",r.DeliveryFee="delivery fee",r.Discount="discount",r.Tip="tip",r.SnapEbt="snap_ebt";class d{isPickup(){return this.orderCartQueryResult.isConsumerPickup||!1}isPreTippable(){return this.orderCartQueryResult.isPreTippable||!1}defaultTips(){var e;return(null!==(e=this.orderCartQueryResult.tipsSuggestionsList)&&void 0!==e?e:[]).map(e=>{let t=e.tipRecipient,n=e.suggestions.find(e=>e.isDefault);return{tipRecipient:t,value:n?n.value:0}})}sumTips(e){return l()(e)}hasCompanyPayment(){var e,t,n;return!!(null===(n=this.orderCartQueryResult)||void 0===n?void 0:null===(t=n.companyPaymentInfo)||void 0===t?void 0:null===(e=t.teamOrderInfo)||void 0===e?void 0:e.budgetId)}hasExternalGiftCardApplied(){var e,t,n;return!!(null===(n=this.orderCartQueryResult)||void 0===n?void 0:null===(t=n.applicableExternalGiftCardDetails)||void 0===t?void 0:null===(e=t.externalGiftCardsList)||void 0===e?void 0:e.length)}getAllExternalGiftCardApplied(){var e,t,n;return null!==(n=null===(t=this.orderCartQueryResult)||void 0===t?void 0:null===(e=t.applicableExternalGiftCardDetails)||void 0===e?void 0:e.externalGiftCardsList)&&void 0!==n?n:[]}companyPayTotal(e){let t=l()(e);return Math.min(this.companyPayCompanyInitialAmount()+t,this.companyPayMaxBudgetAmount())}companyPayMaxBudgetAmount(){var e,t,n;return(null===(n=this.orderCartQueryResult)||void 0===n?void 0:null===(t=n.companyPaymentInfo)||void 0===t?void 0:null===(e=t.maxBudgetAmount)||void 0===e?void 0:e.unitAmount)||0}companyPayCompanyInitialAmount(){var e,t,n;return(null===(n=this.orderCartQueryResult)||void 0===n?void 0:null===(t=n.companyPaymentInfo)||void 0===t?void 0:null===(e=t.companyAmount)||void 0===e?void 0:e.unitAmount)||0}companyPayIndividualAmount(){var e,t,n;return(null===(n=this.orderCartQueryResult)||void 0===n?void 0:null===(t=n.companyPaymentInfo)||void 0===t?void 0:null===(e=t.individualAmount)||void 0===e?void 0:e.unitAmount)||0}appliedCreditsForCartWithBudget(){var e,t,n;return(null===(n=this.orderCartQueryResult)||void 0===n?void 0:null===(t=n.companyPaymentInfo)||void 0===t?void 0:null===(e=t.creditsApplied)||void 0===e?void 0:e.unitAmount)||0}appliedCredits(){return this.hasCompanyPayment()?this.appliedCreditsForCartWithBudget():this.orderCartQueryResult.creditsApplicableBeforeTip||0}companyCredits(){return 0}debits(e){return this.hasCompanyPayment()?this.total(e):this.total(e)+this.appliedCredits()}applicableCredits(e){let t=l()(e),n=this.consumerCredits()-this.appliedCredits();return this.appliedCredits()+Math.min(t,n)}subtotal(){return this.orderCartQueryResult.subtotal||0}serviceFee(){return this.orderCartQueryResult.appliedServiceFee||0}originalServiceFee(){return this.orderCartQueryResult.serviceRateDetails&&this.orderCartQueryResult.serviceRateDetails.originalFee&&this.orderCartQueryResult.serviceRateDetails.originalFee.unitAmount||0}tax(){return this.orderCartQueryResult.taxAmount||0}discount(){return Math.max(this.totalDiscount()-this.appliedCredits(),0)}totalDiscount(){return this.orderCartQueryResult.discountDetails&&this.orderCartQueryResult.discountDetails.appliedDiscount&&this.orderCartQueryResult.discountDetails.appliedDiscount.unitAmount||0}minOrderFee(){return this.orderCartQueryResult.minOrderFee||0}deliveryFee(){return this.orderCartQueryResult.deliveryFee||0}originalDeliveryFee(){return this.orderCartQueryResult.deliveryFeeDetails&&this.orderCartQueryResult.deliveryFeeDetails.originalFee&&this.orderCartQueryResult.deliveryFeeDetails.originalFee.unitAmount||0}isDeliveryFeeDiscounted(){return this.deliveryFee()<this.originalDeliveryFee()}originalTaxesAndFees(){return u()(this.taxesAndFeesLineItems(),e=>void 0!==e.originalValue?e.originalValue:e.value)}taxesAndFeesLineItems(){return[{type:"tax",value:this.tax()},{type:"min order fee",value:this.minOrderFee()},{type:"service fee",originalValue:this.originalServiceFee(),value:this.serviceFee()}]}taxesAndFees(){return u()(this.taxesAndFeesLineItems(),"value")}isTaxesAndFeesDiscounted(){return this.taxesAndFees()<this.originalTaxesAndFees()}legislativeFee(){return this.orderCartQueryResult.legislativeFeeDetails&&this.orderCartQueryResult.legislativeFeeDetails.unitAmount||0}lineItems(e){let t=e.map(e=>({type:"tip",value:e}));return[{type:"subtotal",value:this.subtotal()},{type:"legislative fee",value:this.legislativeFee()},{type:"delivery fee",originalValue:this.originalDeliveryFee(),value:this.deliveryFee()},{type:"taxes and fees",originalValue:this.originalTaxesAndFees(),value:this.taxesAndFees()},{type:"discount",value:-this.discount()},...t]}totalFromLineItems(e){return u()(this.lineItems(e),"value")}total(e){return this.hasCompanyPayment()?l()([this.appliedCreditsForCartWithBudget(),this.companyPayIndividualAmount(),this.companyPayCompanyInitialAmount(),...e]):l()([this.orderCartQueryResult.total||0,...e])}toJSON(){let e=this.defaultTips().map(e=>e.value);return{isPickup:this.isPickup(),isPreTippable:this.isPreTippable(),hasCompanyPayment:this.hasCompanyPayment(),companyPayTotal:this.companyPayTotal(e),companyPayMaxBudgetAmount:this.companyPayMaxBudgetAmount(),companyPayInitialAmount:this.companyPayCompanyInitialAmount(),defaultTips:this.defaultTips(),appliedCredits:this.appliedCredits(),consumerCredits:this.consumerCredits(),debits:this.debits(e),subtotal:this.subtotal(),serviceFee:this.serviceFee(),originalServiceFee:this.originalServiceFee(),tax:this.tax(),discount:this.discount(),totalDiscount:this.totalDiscount(),minOrderFee:this.minOrderFee(),deliveryFee:this.deliveryFee(),originalDeliveryFee:this.originalDeliveryFee(),isDeliveryFeeDiscounted:this.isDeliveryFeeDiscounted(),originalTaxesAndFees:this.originalTaxesAndFees(),taxesAndFeesLineItems:this.taxesAndFeesLineItems(),taxesAndFees:this.taxesAndFees(),isTaxesAndFeesDiscounted:this.isTaxesAndFeesDiscounted(),lineItems:this.lineItems(e),totalFromLineItems:this.totalFromLineItems(e),total:this.total(e),totalSavings:this.totalSavings()}}consumerCredits(){var e;return(null===(e=this.orderCartQueryResult.totalCreditsAvailable)||void 0===e?void 0:e.unitAmount)||0}totalSavings(){return this.orderCartQueryResult.totalSavings||0}getTotalStrikethrough(e){var t,n,i,r;let a=null!==(r=null===(i=this.orderCartQueryResult.lineItemsList)||void 0===i?void 0:null===(n=i.filter(e=>e.chargeId&&[s.k1p.CASH_BACK_REWARDS_APPLIED,s.k1p.CREDITS,s.k1p.EXPENSED_MEAL_COMPANY_PAY].includes(e.chargeId)))||void 0===n?void 0:null===(t=n.map(e=>{var t,n;return null!==(n=null===(t=e.finalMoney)||void 0===t?void 0:t.unitAmount)&&void 0!==n?n:0}))||void 0===t?void 0:t.reduce((e,t)=>e+Math.abs(t),0))&&void 0!==r?r:0,o=l()([this.totalSavings(),-a]);return l()([e,o])}constructor(e){this.orderCartQueryResult=e}}},670436:function(e,t,n){n.d(t,{LZ:function(){return h},O6:function(){return D},QB:function(){return y},Yr:function(){return C},Z9:function(){return f},cV:function(){return T},co:function(){return P},ew:function(){return I},ib:function(){return E},lH:function(){return _},lx:function(){return O},mo:function(){return p},oj:function(){return A},tk:function(){return S}});var i=n(565872),r=n(116196),a=n(158508),l=n(354620),o=n(121827),u=n(980928),s=n(680197),d=n(536088),c=n(361040),v=n(875277);let p="checkout-time-panel-label",m="ddweb-track-interaction-priority-delivery-tooltip",h=e=>{let{scheduledDeliveryTime:t,locale:n,orderTimeAvailability:r,enableAwarenessFormat:a=!1}=e;if("ASAP"===t)return;let{isScheduledTimeAvailableForOrder:l,orderTime:u}=y(t,n,r);if(l&&u){let e=(0,o.EP)(null==r?void 0:r.timezone);if(a){let t=(0,v.ZP)(n,e,u);return"".concat(t,", ").concat(null==u?void 0:u.display)}let t=(0,s.zA)(new Date(null==u?void 0:u.timestamp),{timeZone:e,month:i.th.NUMERIC,day:i.th.NUMERIC},n);return"".concat(t," ").concat(null==u?void 0:u.display)}},y=(e,t,n)=>{var i;let u=(0,o.EP)(null==n?void 0:n.timezone),s=(0,r.Ex)(new Date(e),u),d=(null==n?void 0:n.days)&&(0,l.Qe)(n.days,u,t).find(e=>e.id===s),c=null==d?void 0:null===(i=d.times)||void 0===i?void 0:i.find(t=>(0,a.bE)(t,e));return{isScheduledTimeAvailableForOrder:!!((null==d?void 0:d.id)&&c),orderTime:c}},C=e=>e.isConsumerPickup?!!e.asapPickupAvailable:!!e.asapDeliveryAvailable,_=e=>{var t;let n=!!(null==e?void 0:e.isOutsideDeliveryRegion),i=(null==e?void 0:null===(t=e.orderTimeAvailability)||void 0===t?void 0:t.days)||[];return!n&&i.length>0},A=e=>{var t;let n=null===(t=e.deliveryOptions)||void 0===t?void 0:t.find(e=>e.deliveryOptionType===u.n57.PRIORITY);return!!(n&&n.isOptionSelectable&&n.isPreselected)},f=e=>{var t;let n=!!e.isConvenienceCart,i=null!==(t=e.scheduledDeliveryOptionQuoteMessage)&&void 0!==t?t:"";return n&&i?c.ZP.t("checkoutStrings_scheduleForLaterSaveLabel",{localizedDiscountAmount:i}):i},S=(e,t,n)=>n?t.deliveryOptionType===u.n57.SCHEDULE:e===t.deliveryOptionType,E=e=>null!=e.isOptionSelectable?!e.isOptionSelectable:null!=e.isAvailable&&!e.isAvailable,P=(e,t,n,i)=>e.deliveryOptionType===u.n57.SCHEDULE&&!t&&n&&!i,I=e=>(e.deliveryOptionType===u.n57.PRIORITY&&(e.tooltipText=c.ZP.t("deliveryOption_priorityTooltip")),e),g=()=>{let e=0;try{e=parseInt((0,d.XR)().get(m),10)||0}catch(t){e=0}return e},T=()=>2>g(),O=()=>{let e=g();(0,d.XR)().set(m,"".concat(e+1))},D=e=>{let t={};return e.forEach(e=>{var n,i,r;e.deliveryOptionType===u.n57.PRIORITY&&(t.priority=null!==(n=e.etaMinutesRange)&&void 0!==n?n:""),e.deliveryOptionType===u.n57.NO_RUSH&&(t["no-rush"]=null!==(i=e.etaMinutesRange)&&void 0!==i?i:""),e.deliveryOptionType===u.n57.STANDARD&&(t.standard=null!==(r=e.etaMinutesRange)&&void 0!==r?r:"")}),t}},161906:function(e,t,n){n.d(t,{bk:function(){return S},v9:function(){return E},vi:function(){return P},$w:function(){return T},Fk:function(){return N},D2:function(){return g},SJ:function(){return D},IC:function(){return R},aU:function(){return I},_B:function(){return O},Hn:function(){return A},uz:function(){return f},F0:function(){return C},yB:function(){return y}});var i,r,a=n(625325),l=n(634185),o=n(191782),u=n(980928),s=n(316895),d=n(670436),c=n(142559),v=n(490724),p=n(150631);let m=e=>{var t;let n=null==e?void 0:null===(t=e.deliveryOptions)||void 0===t?void 0:t.find(e=>{let{deliveryOptionType:t}=e;return t===u.n57.PRIORITY}),i=null==n?void 0:n.isOptionSelectable;return!!n&&!!i},h="ASAP",y=e=>{let{orderCart:t,deliveryTime:n,isPickup:i,isGiftRecipientScheduling:r,isNativeGiftCardOrderCart:a,checkoutModeOptions:l,locale:o,isFreeSameDay:s,isPriority:v,orderTimeAvailability:p}=e;if(a||s||(null==t?void 0:t.fulfillmentType)===u.LK5.DineIn||(null==l?void 0:l.mode)===c.O.GROUP_CART_PARTICIPANT_CHECKOUT||r&&!i||(null==t?void 0:t.isMerchantShipping)||!n||!p||v&&m(t))return!0;if(n&&n===h)return i?!!(null==t?void 0:t.asapPickupAvailable):!!(null==t?void 0:t.asapDeliveryAvailable);let{isScheduledTimeAvailableForOrder:y}=(0,d.QB)(n,o,p);return y},C=(e,t,n,i,r,a,l)=>!!((null==e?void 0:e.fulfillmentType)===u.LK5.DineIn||r.mode===c.O.GROUP_CART_PARTICIPANT_CHECKOUT||i&&!n&&!e.isOutsideDeliveryRegion||e.isMerchantShipping||!t||!(null==e?void 0:e.orderTimeAvailability)||a&&!e.isOutsideDeliveryRegion||l&&m(e))||(t&&t===h?n?!!(null==e?void 0:e.asapPickupAvailable):!!(null==e?void 0:e.asapDeliveryAvailable):!e.isOutsideDeliveryRegion),_=(e,t,n)=>n.mode===c.O.GROUP_CART_PARTICIPANT_CHECKOUT||t||!e.isOutsideDeliveryRegion,A=(e,t)=>t.mode===c.O.GROUP_CART_PARTICIPANT_CHECKOUT&&!!e&&v.Ec.has(e.type),f=e=>{let{amountDue:t,isCashTransaction:n}=e;return t>0&&!n};(i=r||(r={})).selectedTimeNotAvailable="Selected time not available",i.notWithinRegion="Not within region",i.invalidOrderType="Invalid order type",i.invalidPayPalConstraints="Invalid Paypal constraints",i.invalidVenmoConstraints="Invalid Venmo constraints",i.invalidAfterpayConstraints="Invalid Afterpay constraints",i.invalidCashAppConstraints="Invalid CashApp constraints",i.giftingError="Meal Gifting error",i.workOrderOptionsError="Work Order Options error",i.foodAlcoholConstraintError="Food and Alcohol Constraint not met",i.cateringError="Catering error",i.addressTooFarAway="Address too far away",i.guestUser="Requires user to be signed in",i.groupCartParticipantNonCreditCardPayment="Group Cart participant requires to use credit card",i.addressNotDeliverableBlocking="We can't deliver to this address right now",i.paymentMethodUnavailable="Current payment method is unavailable because of guided recovery";let S=(e,t,n)=>{var i,r,a;let{deliveryTime:u,hasDefaultCard:d,isApplePaySelected:c,isPickupOrder:m,orderCart:h,venmoCountrySupported:f,paymentMethodRequiredForCheckout:S,giftingError:E,workOrderOptions:P,isGiftRecipientScheduling:I=!1,isCartInvalidForCateringReasons:g=!1,isPaypalAlcoholPaySupported:T=!1,isAfterpayAlcoholPaySupported:O=!1,isUsingAfterpay:D=!1,isAfterpayCountrySupported:R=!1,isValidAfterpayPaymentAmount:N=!0,isGuestUser:b=!1,defaultPaymentMethod:U,isAddressNotDeliverableBlocking:F=!1,isNativeGiftCardOrderCart:k=!1,isCashAppCountrySupported:M=!1,isCashAppGiftCardSupported:L=!1,isFreeSameDay:x=!1,isPriority:w=!1}=e,H=!0===h.containsAlcohol,B=y({orderCart:h,deliveryTime:u,isPickup:m,isGiftRecipientScheduling:I,checkoutModeOptions:t,isNativeGiftCardOrderCart:k,locale:n,isFreeSameDay:x,isPriority:w,orderTimeAvailability:h.orderTimeAvailability}),Z=C(h,u,m,I,t,x,w),K=_(h,m,t),V=!c&&(null==U?void 0:U.type)===v.Oh.PAYPAL,Q=!c&&(null==U?void 0:U.type)===v.Oh.VENMO,G=k&&!L,Y=(null==U?void 0:U.type)===v.Oh.CASHAPP&&(!M||H||G),z=(0,s.cs)(null!==(i=null==P?void 0:P.expenseCode)&&void 0!==i?i:"",s.uB.CODE),W=(0,s.cs)(null!==(r=null==P?void 0:P.expenseNote)&&void 0!==r?r:"",s.uB.NOTE),q=(0,s.Uw)(h,null!==(a=null==P?void 0:P.expenseCode)&&void 0!==a?a:""),j=(0,o.sx)(h),J=q&&z.isValid&&W.isValid||j,X={"Selected time not available":!B,"Not within region":!K,"Invalid order type":!(!S||d||c),"Invalid Paypal constraints":!(!V||T||!H),"Invalid Venmo constraints":!(!Q||!H&&f),"Meal Gifting error":!!E,"Work Order Options error":!J,"Food and Alcohol Constraint not met":!(0,l.V)(h.foodAlcoholConstraintCartLevel),"Catering error":g,"Invalid Afterpay constraints":!(!D||R&&N&&(!H||O)),"Invalid CashApp constraints":Y,"Address too far away":!Z,"Requires user to be signed in":b,"Group Cart participant requires to use credit card":A(U,t),"We can't deliver to this address right now":F,"Current payment method is unavailable because of guided recovery":(0,p.eo)(U)};return Object.keys(X).filter(e=>X[e])},E=e=>{let{accountCredits:t,companyPay:n,refund:i,totalWithTipBeforeCredits:r,dashCardPoints:a,hsaFsaAuthorizedAmount:l}=e;return Math.max(0,P({accountCredits:t,companyPay:n,refund:i,totalWithTipBeforeCredits:r})-a)+l},P=e=>{let{accountCredits:t,companyPay:n,refund:i,totalWithTipBeforeCredits:r}=e;return Math.max(r-(t+i+n),0)},I=e=>{let{totalWithTipBeforeCredits:t,refund:n}=e;return t-n},g=e=>{let{totalWithTipBeforeCredits:t,companyPay:n,accountCredits:i}=e;return Math.max(0,Math.min(t-n,i))},T=e=>{let{companyPay:t,accountCredits:n,refund:i,totalWithTipBeforeCredits:r,dashCardPoints:a,hsaFsaAuthorizedAmount:l}=e,o=I({totalWithTipBeforeCredits:r,refund:i});return{amountDue:E({companyPay:t,accountCredits:n,refund:i,totalWithTipBeforeCredits:r,dashCardPoints:a,hsaFsaAuthorizedAmount:l}),creditsApplied:g({accountCredits:n,companyPay:t,totalWithTipBeforeCredits:r}),totalAmount:o,amountDueWithoutPoints:P({companyPay:t,accountCredits:n,refund:i,totalWithTipBeforeCredits:r})}},O=e=>{let{firstName:t,lastName:n,phoneNumber:i,email:r}=e;return[t,n,r,i].map(e=>e.trim()).every(e=>!!e)&&(0,a.vV)(r.toLowerCase())},D=e=>e.commissionMessage?e.commissionMessage:"",R=e=>{var t;return null!==(t=e.restaurant)&&void 0!==t&&!!t.requiresCheckIn&&e.restaurant.requiresCheckIn},N=e=>{var t,n;return(null===(n=e.restaurant)||void 0===n?void 0:null===(t=n.business)||void 0===t?void 0:t.name)?e.restaurant.business.name:""}},497986:function(e,t,n){n.d(t,{m:function(){return p}});var i=n(824075),r=n(481582),a=n(691596),l=n(571926),o=n(459549),u=n(980928),s=n(634982),d=n(103911),c=n(767545);let v=e=>{let{snapEBTEligibleAmount:t,hsaFsaEligibleAmount:n}=(0,s.S)({paymentMethods:e});return(0,d.lz)({entryPoint:c.CZ.CHECKOUTINFO_WITHOUT_LOGIN,hsaFsaEligibleAmount:n,isSnapEBTExperience:!!t,paymentMethods:e})},p=(e,t,n)=>{var s,d;let c=(0,i.y)(a.pc.ddfbBusinessProfiles,!1),{consumer:p}=(0,o.R)(),{data:m,isLoading:h,refetch:y}=(0,l.A)({consumerId:null==p?void 0:p.id},c),C=c&&(!(null==m?void 0:m.business_profile)||(null==m?void 0:m.business_profile.profile_status)!==r.ConsumerBusinessProfileServiceV1ProfileStatus.Prohibited),_=v(null!=t?t:[]),A=(null==m?void 0:null===(s=m.business_profile)||void 0===s?void 0:s.is_active)||!1,f=(null==m?void 0:null===(d=m.business_profile)||void 0===d?void 0:d.default_payment_method_id)||null,S=!(null==t?void 0:t.some(e=>e.paymentMethodUuid===f)),E=C&&!h&&(!A||!f||S)&&e===u.gc6.PAYMENT_PROFILE_TYPE_BUSINESS,P=C&&(A||e===u.gc6.PAYMENT_PROFILE_TYPE_BUSINESS)&&!n&&!_;return{isBusinessProfileEnabled:C,isBpDataLoading:h,isBpActive:A,shouldShowBpWarning:E,isBpActiveWithoutDefaultBusinessPayment:A&&(!f||S),enableBusinessProfileToggleOnCheckout:P,bpData:null==m?void 0:m.business_profile,refetchBpData:y}}},875277:function(e,t,n){n.d(t,{KY:function(){return l}});var i=n(565872),r=n(361040),a=n(680197);let l=(e,t,n)=>{let i=new Date,r=new Date(i);return r.setDate(r.getDate()+1),{isToday:o(e,i,t,n),isTomorrow:o(e,r,t,n)}},o=(e,t,n,i)=>s(e,n,i)===s(t,n,i),u=(e,t,n)=>{let i=new Date(new Date);return i.setDate(i.getDate()+7),e<i&&!o(e,i,t,n)},s=(e,t,n)=>Intl.DateTimeFormat(t,{timeZone:n}).format(e);t.ZP=(e,t,n)=>{let o=new Date(null==n?void 0:n.timestamp),{isToday:s,isTomorrow:d}=l(o,e,t),c=u(o,e,t);if(s)return r.ZP.t("layoutStrings_timePicker_today_sentence_case");if(d)return r.ZP.t("layoutStrings_timePicker_tomorrow_sentence_case");if(c)return o.toLocaleString(e,{weekday:"long"});let v={timeZone:t,month:i.th.SHORT,day:i.th.NUMERIC};return(0,a.zA)(new Date(null==n?void 0:n.timestamp),v,e)}},116196:function(e,t,n){n.d(t,{C8:function(){return s},Ex:function(){return d},hk:function(){return v}});var i=n(3075),r=n(565872),a=n(680197),l=n(121827),o=n(361040);let u=[i.g.JA,i.g.JA_JP],s=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l.zL,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{toUpperCase:!0,useLongWeekdayDisplay:!1},d=c(e,i.g.EN,r),v=c(n,i.g.EN,r),p=(0,a.I)(d.getTime(),v.getTime());if(0===p)return(null==s?void 0:s.toUpperCase)?o.ZP.t("layoutStrings_timePicker_today"):o.ZP.t("layoutStrings_timePicker_today_sentence_case");if(1===p)return(null==s?void 0:s.toUpperCase)?o.ZP.t("layoutStrings_timePicker_tmr"):o.ZP.t("layoutStrings_timePicker_tomorrow_sentence_case");let m=u.includes(t)||s.useLongWeekdayDisplay?"long":"short",h=(0,a.zA)(e,{weekday:m,timeZone:r},t).replace(/\./g,"");return(null==s?void 0:s.toUpperCase)?h.toUpperCase():h};function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,l.EP)();return(0,a.zA)(e,{timeZone:t,month:r.th.NUMERIC,day:r.th.NUMERIC,year:"2-digit"},i.g.EN)}let c=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,l.EP)();return new Date((0,a.zA)(e,{timeZone:n,month:r.th.NUMERIC,day:r.th.NUMERIC,year:"2-digit"},t))},v=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,l.EP)();return(0,a.zA)(e,{timeZone:n,month:r.th.SHORT,day:r.th.NUMERIC},t)}},158508:function(e,t,n){n.d(t,{bE:function(){return a}});var i=n(680197);let r=e=>(0,i.sc)((0,i._3)(e)),a=(e,t)=>{let n=r(t);return r(e.timestamp)===n}},349172:function(e,t,n){n.d(t,{F:function(){return r},H:function(){return a}});var i=n(361040);let r=(e,t)=>{let n=e.find(e=>e.id===t);return(null==n?void 0:n.times)||[]},a=(e,t)=>{let n={selectDateText:e?i.ZP.t("layoutStrings_timePicker_selectAPickupDate"):i.ZP.t("layoutStrings_timePicker_selectADeliveryDate"),selectTimeText:e?i.ZP.t("layoutStrings_timePicker_desiredPickupTime"):i.ZP.t("layoutStrings_timePicker_desiredDeliveryTime")};return t&&(n.selectDateDescriptionText=i.ZP.t("layoutStrings_timePicker_cateringScheduleMessage",{storeName:t.storeName,numHours:t.numHours})),n}},354620:function(e,t,n){n.d(t,{Og:function(){return p},On:function(){return c},Qe:function(){return m},xX:function(){return v},xd:function(){return d}});var i=n(670436),r=n(116196),a=n(349172),l=n(121827),o=n(425869),u=n(584628),s=n(849810);let d=e=>({selectDateHeading:"",selectTimeHeading:"",selectTimeSubheading:(0,l.NN)(e),showAsapToggle:!0,scheduledTime:"ASAP",selectedTimeRange:null,scheduledTimeDateId:"",todayDateId:(0,r.Ex)(),availableDaysAndTimes:[]}),c=(e,t)=>{if(!e||"ASAP"===e||!t)return null;let n=new Date(e).getTime();for(let e of null!=t?t:[])for(let t of e.times)if(new Date(t.timestamp).getTime()===n)return{midpoint:t.timestamp,max:t.max,min:t.min};return null};function v(e,t){if("ASAP"===e||isNaN(Date.parse(e)))return!0;let n=new Date(e),i=new Date;return i.setHours(i.getHours()+t),i>n}function p(e,t,n){var v,p,h;let y=null==t?void 0:t.orderTimeAvailability,C=null!==(h=null==n?void 0:n.enableNewScheduleAheadUi)&&void 0!==h&&h,_=(0,s.bU)(),A=(0,o.j9)(t),{selectDateText:f,selectTimeText:S,selectDateDescriptionText:E}=(0,a.H)(null==t?void 0:t.isConsumerPickup,A),P=(0,l.EP)(null==y?void 0:y.timezone),I=(0,u.Z)();return t?{selectDateHeading:f,selectDateDescription:E,selectTimeHeading:S,selectTimeSubheading:I?(0,l.NN)(_,null==y?void 0:y.timezone):"",showAsapToggle:(0,i.Yr)(t),scheduledTime:e,selectedTimeRange:c(e,(null==t?void 0:null===(v=t.orderTimeAvailability)||void 0===v?void 0:v.days)||[]),scheduledTimeDateId:(0,r.Ex)(new Date(e),P),todayDateId:(0,r.Ex)(new Date,P),availableDaysAndTimes:m((null===(p=t.orderTimeAvailability)||void 0===p?void 0:p.days)||[],P,_,{toUpperCase:!C,useLongWeekdayDisplay:C},null==n?void 0:n.minLeadTime)}:d(_)}let m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,l.EP)(),n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{toUpperCase:!0,useLongWeekdayDisplay:!1},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return e.map(e=>{var l,o;let u=null==e?void 0:null===(o=e.times)||void 0===o?void 0:null===(l=o[0])||void 0===l?void 0:l.timestamp,s=new Date(null==e?void 0:e.year,(null==e?void 0:e.month)-1,null==e?void 0:e.date),d=a&&a>0?e.times.filter(e=>{let t=new Date;return t.setHours(t.getHours()+a),new Date(e.timestamp)>t}):e.times;return{...e,id:(0,r.Ex)(new Date(u),t),numberDisplay:e.date.toString(),labelDisplay:(0,r.C8)(new Date(u),n,new Date,t,i),shortDay:(0,r.hk)(s,n),times:d,isDisabled:0===d.length}})}},121827:function(e,t,n){n.d(t,{zL:function(){return s},ZP:function(){return p},EP:function(){return d},NN:function(){return c}});var i,r,a=n(332210),l=n(3075),o=n(361040);(i=r||(r={})).SHORT="short",i.LONG="long";var u=n(354620);let s="US/PACIFIC",d=e=>{let t=(0,a.EP)();return e||t||s},c=(e,t)=>{let n=v(e,t,r.SHORT);return o.ZP.t("layoutStrings_timePicker_timezone",{timezone:n})},v=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.g.EN_US,n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,o=(0,a.EP)(),u=i||r.SHORT;return(null===(e=Intl.DateTimeFormat(t,{timeZone:n||o||s,timeZoneName:u}).formatToParts(new Date).find(e=>"timeZoneName"==e.type))||void 0===e?void 0:e.value)||n||o||s};var p=(e,t,n)=>{var i,r;let a=null!==(r=null==t?void 0:null===(i=t.beExperimentFlags)||void 0===i?void 0:i.enableNewScheduleAheadUi)&&void 0!==r&&r;return(0,u.Og)(e,t,{enableNewScheduleAheadUi:a,minLeadTime:n})}},584628:function(e,t,n){var i=n(95841);let r=["DE"];t.Z=()=>{let e=(0,i.Z)();return!r.includes(e)}},398268:function(e,t,n){n.d(t,{J:function(){return l}});var i=n(497247);let r=(e,t)=>{let n;try{n=window.Stripe(t,{canCreateRadarSession:!0,betas:["afterpay_clearpay_setup_intents_beta"]})}catch(e){(0,i.Tb)(e);return}e(n)},a=(e,t,n)=>{e.addEventListener("load",()=>{r(t,n)})},l=(e,t)=>{if(window.Stripe)r(e,t);else{let n=document.querySelector("#stripe-js");if(!n){let n=document.createElement("script");n.type="text/javascript",n.src="https://js.stripe.com/v3",n.id="stripe-js",document.body.appendChild(n),a(n,e,t)}n&&a(n,e,t)}}},103911:function(e,t,n){n.d(t,{F2:function(){return o},UR:function(){return u},lz:function(){return l},vF:function(){return a}});var i=n(767545),r=n(980928);let a=e=>i.Y5.has(e)||e===i.CZ.CHECKOUT_DOUBLEDASH||i.FZ.has(e),l=e=>{var t;let{entryPoint:n,hsaFsaEligibleAmount:a,isSnapEBTExperience:l,paymentMethods:o}=e,u=o.find(e=>{var t;return null===(t=e.metadata)||void 0===t?void 0:t.isHsaFsaCard}),s=o.find(e=>e.isDefault),d=i.Uj.has(n),c=u&&(null===(t=u.paymentMethodAvailability)||void 0===t?void 0:t.paymentMethodAvailabilityStatus)!==r.x1t.status_down;return!!(!l&&d&&a&&c&&s)},o=e=>{var t;let{hasDefaultPaymentMethod:n,isSnapEBTExperience:i,hsaFsaPaymentMethod:a,hsaFsaEligibleAmount:l}=e,o=a&&(null===(t=a.paymentMethodAvailability)||void 0===t?void 0:t.paymentMethodAvailabilityStatus)!==r.x1t.status_down;return!!(n&&!i&&o&&l)},u=e=>{var t,n;return null!==(n=null==e?void 0:null===(t=e.metadata)||void 0===t?void 0:t.isHsaFsaCard)&&void 0!==n&&n}},767545:function(e,t,n){var i,r,a,l,o,u,s,d,c,v;n.d(t,{$0:function(){return i},CZ:function(){return a},FZ:function(){return h},Nj:function(){return r},Uj:function(){return m},Y5:function(){return p},uZ:function(){return o},wp:function(){return l}}),(u=i||(i={})).STRIPE="stripe",u.PAYPAL="paypal",(s=r||(r={})).Stripe="stripe",s.Vgs="vgs",s.Braintree="braintree",(d=a||(a={})).HOME="home",d.ACCOUNT_PAYMENT="account_payment",d.DASHPASS_MANAGE_SUBSCRIPTION="manage_subscription",d.ACCOUNT_BUSINESS_PROFILES="account_business_profiles",d.BUSINESS_PROFILES_SELECT_PAYMENT_MODAL="business_profiles_select_payment_modal",d.CHECKOUT="checkout",d.CHECKOUTINFO_WITHOUT_LOGIN="checkoutInfoWithoutLogin_paymentDetails",d.CHECKOUTINFO="checkoutInfo_changePaymentModal",d.CHECKOUTINFO_PAYMENTPANEL="mx_checkout_payment_panel",d.CHECKOUTINFO_PAYMENTPANEL_NO_PROMO="mx_checkout_payment_panel_no_promo",d.CHECKOUTSIDEBAR_PM_DECLINED="checkoutSidebar_paymentDeclined",d.CHECKOUTSIDEBAR_PM_MISSING="checkoutSidebar_paymentMissing",d.CHECKOUTSIDEBAR_CX_GUIDED_RECOVERY="checkoutSidebar_cxGuidedRecovery",d.CHECKOUTINFO_PAYMENT_ERROR="checkoutInfoPaymentError",d.CHECKOUT_HSAFSA_ADD_CARD_BANNER="checkoutHSAFSAAddCardBanner",d.CHECKOUT_PAUSE_REVIEW_BANNER="checkoutPauseReviewBanner",d.CHECKOUT_SHIP_ANYWHERE="checkoutShipAnywhere",d.CHECKOUT_DOUBLEDASH="checkoutDoubleDash",d.CHECKOUT_ADD_CARD_MODAL="checkoutAddCardModal",d.CHECKOUT_ONE_TAP_RETRY="checkoutOneTapRetry",d.DRIVE_CHECKOUT="checkoutDrive",d.STOREFRONT_CHECKOUT="checkoutStorefront",d.POST_CHECKOUT="postCheckout",(c=l||(l={})).DASHPASS_SIGNUP="dashpassSignup",c.DASHPASS_ANNUAL_PLAN_UPSELL="dashpass_annual_plan_upsell",c.DASHPASS_ANNUAL_PLAN_UPSELL_BUTTON="dashpass_annual_plan_upsell_button",c.DASHPASS_ANNUAL_PLAN_ADD_CARD_BUTTON="dashpass_annual_plan_add_button",c.DASHPASS_MANAGE_SUBSCRIPTION="manage_subscription",c.DASHPASS_MODAL="dashpass_modal",c.DASHPASS_LANDING="dashpass_landing",c.DASHPASS_PARTNER="partner_dashpass",c.EXCLUSIVE_ITEM="exclusive_item",c.DASHPASS_ORDER_CART_UPSELL="dashpass_order_cart_upsell",(v=o||(o={})).ACCOUNT="account",v.POST_CHECKOUT="post-checkout",v.ORDERS="orders",v.ORDERS_EXPENSE_PROVIDER_UPSELL="orders_expense_provider_upsell",v.UNSPECIFIED="unspecified";let p=new Set(Object.values(l)),m=new Set(["checkoutInfo_changePaymentModal","checkoutInfoWithoutLogin_paymentDetails","mx_checkout_payment_panel","mx_checkout_payment_panel_no_promo","checkoutSidebar_paymentDeclined","checkoutSidebar_paymentMissing","checkoutSidebar_cxGuidedRecovery","checkoutInfoPaymentError","checkoutShipAnywhere","checkoutDoubleDash","checkoutOneTapRetry","checkoutStorefront","checkoutDrive"]),h=new Set(Object.values(o))},634185:function(e,t,n){n.d(t,{V:function(){return r}});var i=n(980928);let r=e=>e!==i.m06.REQUIRES_ANY_FOOD_ITEM},191782:function(e,t,n){n.d(t,{DH:function(){return r},II:function(){return u},K$:function(){return s},bG:function(){return l},iP:function(){return c},oj:function(){return a},sx:function(){return o},tN:function(){return d}});let i=e=>(null==e?void 0:e.companyPaymentInfo)||null,r=e=>{var t;let n=i(e);return!!(null==n?void 0:null===(t=n.teamOrderInfo)||void 0===t?void 0:t.budgetId)},a=e=>{let t=!o(e),n=i(e),r=(null==n?void 0:n.teamOrderInfo)||null;return t?r:null},l=e=>{var t;let n=i(e);return(null==n?void 0:null===(t=n.maxBudgetAmount)||void 0===t?void 0:t.unitAmount)||0},o=e=>0==l(e),u=e=>{let t=l(e);return r(e)&&t>0},s=e=>{let t=i(e);return(null==t?void 0:t.budgetPayerName)||""},d=e=>{var t;let n=i(e);return(null==n?void 0:null===(t=n.teamOrderInfo)||void 0===t?void 0:t.budgetId)||""},c=e=>{var t,n;return null!==(n=null==e?void 0:null===(t=e.expenseOrderOptions)||void 0===t?void 0:t.allEligibleExpensedMealsBudgets)&&void 0!==n?n:[]}},507449:function(e,t,n){n.d(t,{Gl:function(){return f},Hj:function(){return m},NT:function(){return S},Nq:function(){return y},R3:function(){return A},VK:function(){return p},Vb:function(){return h},kz:function(){return v},y2:function(){return C}});var i=n(512150),r=n(536088),a=n(434665),l=n(902336),o=n(682852),u=n(163151),s=n(185555),d=n(161906);let c="dd_dcp",v=0,p=e=>{let t=h();return t?m(e,t)?(C(),v):t.amount||v:v},m=(e,t)=>e.cartId!==t.cartId||e.storeId!==t.storeId||e.currency!==t.currency,h=()=>r.ZP.get(c),y=e=>{r.ZP.set(c,e,2592e3)},C=()=>{r.ZP.delete(c)},_=(e,t,n)=>{let i=e;return i>t&&(i=t),i>n&&(i=n),i},A=e=>{var t;let{potentialDashPassRefundAmount:n,totalWithTipBeforeCredits:r,tips:a}=i.useContext(o.ZP),{orderCart:l}=i.useContext(u.iB),c=l.rewardBalanceAvailable,v=(null==c?void 0:null===(t=c.monetaryValue)||void 0===t?void 0:t.unitAmount)||0,p=i.useMemo(()=>{let e=new s.ZP(l),t=a.map(e=>e.value);return(0,d.vi)({accountCredits:e.applicableCredits(t),companyPay:e.companyPayTotal(t),refund:n,totalWithTipBeforeCredits:r})},[l,n,a,r]);return{amountDueWithoutPoints:p,computedDashCardPointsAmount:_(e,v,p)}},f=e=>{let t=S(),{computedDashCardPointsAmount:n}=A(e);return t&&0!==n?{rewardBalanceApplied:{unitAmount:n}}:null},S=()=>{let{isCaviar:e,isDoorDash:t}=(0,a.useExperience)(),n=(0,l.TH)(),i=(0,l.tv)(),r=((null==i?void 0:i.asPath)||(null==n?void 0:n.pathname)||"").startsWith("/consumer/checkout");return(e||t)&&r}},316895:function(e,t,n){var i,r,a,l,o,u;n.d(t,{U9:function(){return m},Uw:function(){return y},ao:function(){return v},cs:function(){return C},gS:function(){return a},lv:function(){return h},uB:function(){return r}}),(l=i||(i={})).DEFAULT_NOT_REQUIRED="DEFAULT_NOT_REQUIRED",l.OPTIONAL_CODE="OPTIONAL_CODE",l.ENFORCED_CODE="ENFORCED_CODE",l.ENFORCED_LIST="ENFORCED_LIST",(o=r||(r={})).CODE="EXPENSE_CODE",o.NOTE="EXPENSE_NOTE",(u=a||(a={})).TOO_LONG="Too Long",u.INVALID_SEQUENCE="Invalid sequence",u.INVALID_CHARACTER="Invalid character";let s=e=>Object.values(i).includes(e),d=["OPTIONAL_CODE","ENFORCED_CODE","ENFORCED_LIST"],c=["ENFORCED_CODE","ENFORCED_LIST"],v=e=>{var t,n;let i=null!==(n=null==e?void 0:null===(t=e.expenseOrderOptions)||void 0===t?void 0:t.expenseCodeMode)&&void 0!==n?n:"",r=s(i)?i:"DEFAULT_NOT_REQUIRED";return{expenseCodeMode:r,shouldRenderExpenseCodeField:d.includes(r)}},p=(e,t)=>(e||"").length>("EXPENSE_CODE"===t?50:250),m=e=>/([^\w\s-:,+\.@])/.test(e),h=e=>{var t;return!!c.map(e=>e.toString()).includes((null===(t=e.expenseOrderOptions)||void 0===t?void 0:t.expenseCodeMode)||"")},y=(e,t)=>!h(e)||!!t&&t.trim().length>0,C=(e,t)=>{let n=!0,i=[];return p(e,t)&&(n=!1,i.push("Too Long")),m(e)&&(n=!1,i.push("Invalid character")),((e||"").includes("javascript:")||(e||"").includes("data:"))&&(n=!1,i.push("Invalid sequence")),{isValid:n,invalidReason:i}}}}]);
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="aff60918-e339-5b49-94b3-a23051c1b77a")}catch(e){}}()
//# debugId=aff60918-e339-5b49-94b3-a23051c1b77a
//# sourceMappingURL=7747-e107e97d89eb7cd3.js.map
