"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[30429],{139357:function(e,t,n){n.d(t,{ZP:function(){return H},Tg:function(){return z},GK:function(){return F},u8:function(){return U}});var i=n(485986),l=n(690729),o=n.n(l),r=n(512150),a=n(425869),u=n(829872),d=n(44343),s=n(33510),c=n(948350),v=n(148311),p=n(849810),m=e=>{var t,n,i;let{cartId:l,isOutsideDeliveryRegion:o,savedGiftOptions:r,setGiftOptions:a,entryPoint:u}=e,d=(0,p.bU)(),m=(0,v.U)(),f=u===c.JE.CHECKOUT_INFO||u===c.JE.CHECKOUT_INFO_V2,g=(0,s.Z)(),h=!!(null==r?void 0:r.shouldRecipientScheduleGift);return{hasGiftThatCanBeScheduled:!!((null==r?void 0:null===(t=r.recipientName)||void 0===t?void 0:t.length)||(null==r?void 0:null===(n=r.recipientGivenName)||void 0===n?void 0:n.length)||(null==r?void 0:null===(i=r.recipientFamilyName)||void 0===i?void 0:i.length))&&m&&!o,isGiftRecipientScheduling:h,removeShouldRecipientScheduleGift:()=>{if(r&&h){let e={...r,shouldRecipientScheduleGift:!1};a(e),g({cartId:l,giftOptions:e,...f?{}:{refetchQueries:["checkout"]}}).catch(e=>{a(r),(0,c.gs)({giftOptions:r,message:e,entryPoint:u},d)})}}}},f=n(459549),g=n(417779),h=n(980928),y=n(561662),b=n(26556),S=n(361040),x=n(756471),C=n(387974),P=n(105678),A=n(682852),T=n(163151),_=n(206916),k=n(251197),Z=n(670436),I=n(382263),E=n(158765);let N=e=>{let{personalAddressLabel:t,fulfillmentType:n,isAddressLabelEnabled:i}=e;return n!==h.LK5.Delivery?I.IconType.MerchantLine:i?(0,E.at)(null==t?void 0:t.labelIcon):I.IconType.HomeLine};var R=n(933844),M=n.n(R);let D="ASAP",O=e=>{let{scheduledTimeString:t,isScheduledAvailable:n,isGiftRecipientScheduling:i,selectedDeliveryOption:l,localScheduledTime:o,isNativeGiftCardOrderCart:r}=e;return r?t!==D?M()(o).format("ddd, MMM Do, YYYY"):S.ZP.t("checkoutStrings_fulfillmentDetails_chooseATime"):i?S.ZP.t("checkoutStrings_recipientWillSchedule"):n?l===h.n57.SCHEDULE&&t!==D?t:S.ZP.t("checkoutStrings_fulfillmentDetails_chooseATime"):S.ZP.t("checkoutStrings_unavailable")};var j=e=>{var t,n,i,l,o;let{orderCart:r,scheduledTimeString:a,isGiftRecipientScheduling:u,isNativeGiftCardOrderCart:d,hasGiftThatCanBeScheduled:s,isSameStoreCateringEnabled:c,etaMinutesRange:v}=e,p=c&&!!(null==r?void 0:r.isSameStoreCatering),m=(0,Z.Yr)(r),f=(0,Z.lH)(r),g=!!(null==r?void 0:null===(t=r.deliveryOptions)||void 0===t?void 0:t.find(e=>{let{deliveryOptionType:t}=e;return t===h.n57.FREE_SAME_DAY})),y=null===(n=r.restaurant)||void 0===n?void 0:n.offersPackageReturns,b=!!(null===(i=r.orderQualityInfo)||void 0===i?void 0:i.isLoqForceSchedule),x=null!==(l=null==r?void 0:r.isConsumerPickup)&&void 0!==l&&l,C=x?r.asapPickupTimeRange:r.asapTimeRange,P=!x&&!!r.asapDeliveryOverrideTitle,A=P?r.asapDeliveryOverrideTitle:S.ZP.t("checkoutStrings_standard"),T=P?r.asapDeliveryOverrideSubtitle:C,_=[],k=!1,I=m&&!p,E={deliveryOptionType:h.n57.STANDARD,optionTitle:I?A:S.ZP.t("checkoutStrings_standard"),optionSubtitle:I?T:S.ZP.t("checkoutStrings_unavailable"),isScheduleDelivery:!0,isAvailable:I,etaMinutesRange:C},N=a===S.ZP.t("checkoutStrings_asap")||u?"":a,R=F({isGiftRecipientScheduling:u,isScheduledAvailable:f,isNativeGiftCardOrderCart:d,hasGiftThatCanBeScheduled:s,scheduledTimeLabel:N,scheduleDeliveryOptionQuoteMessage:(0,Z.Z9)(r),etaMinutesRange:v});if(y?_.push({deliveryOptionType:h.n57.STANDARD,optionTitle:S.ZP.t("checkoutStrings_standard"),optionSubtitle:m?S.ZP.t("checkoutStrings_asap"):S.ZP.t("checkoutStrings_unavailable"),isScheduleDelivery:!0,isAvailable:m,etaMinutesRange:C}):(_.push(E),_.push(R)),!x&&!y&&!b&&!p){let e=[h.n57.PRIORITY],t=[],n=[],i=!1,l=!1;null===(o=r.deliveryOptions)||void 0===o||o.forEach(o=>{var r,a,u;let d=!!o.optionOverrideTitle;o.deliveryOptionType===h.n57.PRIORITY&&(k=!!(null===(a=o.backendStyling)||void 0===a?void 0:null===(r=a.title)||void 0===r?void 0:r.displayString));let s={...o,...d?{optionTitle:o.optionOverrideTitle,optionSubtitle:o.optionSubtitle,optionQuoteMessage:o.optionHighlightedText}:{optionSubtitle:o.etaMinutesRange},availableDaysList:null!==(u=o.availableDaysList)&&void 0!==u?u:[]};e.includes(o.deliveryOptionType)?t.push(s):(n.push(s),o.deliveryOptionType===h.n57.STANDARD&&(i=!0),o.deliveryOptionType===h.n57.SCHEDULE&&(l=!0))}),_=[...t.map(Z.ew),...g||i?[]:[E],...n,...l?[]:[R]]}return{isBackendDrivenExpressTile:k,timeOptions:_}},L=n(755072),B=n(875302);let w=e=>"“".concat(o()(e,{length:50}),"”"),z=(e,t,n)=>{var i,l,o,r,a;let u=null!==(o=null===(i=e.printableAddress)||void 0===i?void 0:i.split(","))&&void 0!==o?o:[],d=N({personalAddressLabel:"personalAddressLabel"in e?e.personalAddressLabel:null,fulfillmentType:t,isAddressLabelEnabled:n});return n&&"personalAddressLabel"in e&&(null===(l=e.personalAddressLabel)||void 0===l?void 0:l.labelName)?{firstLine:e.personalAddressLabel.labelName,secondLine:null!==(r=e.printableAddress)&&void 0!==r?r:"",icon:d}:"shortname"in e?{firstLine:(null!==(a=e.shortname)&&void 0!==a?a:"")+(e.subpremise?" ".concat((0,y.Ay)(e.subpremise)):""),secondLine:u.length>1?u.slice(1).join(", "):u[0],icon:d}:{firstLine:u[0],secondLine:u.length>1?u.slice(1).join(", "):"",icon:d}},U=e=>{var t;return(null!==(t=e.deliveryOptions)&&void 0!==t?t:[]).map(e=>{let t=!!e.optionOverrideTitle;return{...e,...t?{optionTitle:e.optionOverrideTitle,optionSubtitle:e.optionSubtitle,optionQuoteMessage:e.optionHighlightedText}:{optionSubtitle:e.etaMinutesRange}}})};function F(e){let{isGiftRecipientScheduling:t,isScheduledAvailable:n,hasGiftThatCanBeScheduled:i,isNativeGiftCardOrderCart:l,etaMinutesRange:o,scheduledTimeLabel:r,scheduleDeliveryOptionQuoteMessage:a}=e;return{deliveryOptionType:h.n57.SCHEDULE,optionTitle:t?S.ZP.t("checkoutStrings_scheduledRecipientWillSchedule"):S.ZP.t("checkoutStrings_scheduleForLater"),optionSubtitle:o,isScheduleDelivery:!0,isAvailable:n||i||l,etaMinutesRange:r,optionQuoteMessage:a}}var H=()=>{var e,t,n,l,o,s,v,p,y,S,I,E,N,R,M,D,U,F,H,V,G,$;let{consumer:Y}=(0,f.R)(),{orderCart:Q}=r.useContext(T.iB),{giftOptions:W,setGiftOptions:K,localScheduledTime:q,setLocalScheduledTime:J,set:X,hasAccessibilityRequirements:ee}=r.useContext(A.ZP),et=(0,d.Z)(),en=null===(e=Q.restaurant)||void 0===e?void 0:e.offersPackageReturns,ei=Y.defaultAddress||{},{selectedDeliveryOption:el,setSelectedDeliveryOption:eo,setDeliveryOptionInfo:er,checkoutQueryScheduledTime:ea}=r.useContext(_.Z),eu=(0,P.DW)(null==Q?void 0:Q.dropoffOptions),ed=(0,g.l)(Q.id,ei,eu,el,en),es=ed.loading||ed.error?[]:ed.dropoffOptions,ec=(0,x.Am)(null!==(E=null===(n=Y.defaultAddress)||void 0===n?void 0:null===(t=n.dropoffPreferences)||void 0===t?void 0:t.allPreferences)&&void 0!==E?E:[],es,null!==(N=null===(l=Y.defaultAddress)||void 0===l?void 0:l.driverInstructions)&&void 0!==N?N:""),ev=(0,x.s)(null!==(R=null===(s=Y.defaultAddress)||void 0===s?void 0:null===(o=s.dropoffPreferences)||void 0===o?void 0:o.allPreferences)&&void 0!==R?R:[],es),{setFulfillmentType:ep,isFulfillmentTypeLoading:em,fulfillmentType:ef}=(0,L.Z)(),[eg,eh]=r.useState(ef),ey=m({cartId:Q.id,isOutsideDeliveryRegion:!!Q.isOutsideDeliveryRegion,savedGiftOptions:W,setGiftOptions:K,entryPoint:c.JE.CHECKOUT_INFO_V2}),{hasGiftThatCanBeScheduled:eb,isGiftRecipientScheduling:eS}=ey,ex=(0,C.Qy)(Q),{isAddressLabelEnabled:eC}=(0,u.Z)(),eP=null===(v=Q.restaurant)||void 0===v?void 0:v.address,eA=Y.defaultAddress,eT=eg===L.L.Delivery?eA?z(eA,eg,eC):{firstLine:"",secondLine:""}:eP?z(eP,eg,eC):{firstLine:"",secondLine:""},e_=null!==(D=null!==(M=null===(p=Q.restaurant)||void 0===p?void 0:p.squareCoverImgUrl)&&void 0!==M?M:null===(y=Q.restaurant)||void 0===y?void 0:y.coverImgUrl)&&void 0!==D?D:"",ek=!!e_&&!!(null===(S=Q.restaurant)||void 0===S?void 0:S.shouldShowStoreLogo),eZ=[eg===L.L.Delivery?{type:i.S.HOME,lat:null!==(U=null==eA?void 0:eA.lat)&&void 0!==U?U:0,lng:null!==(F=null==eA?void 0:eA.lng)&&void 0!==F?F:0,imageUrl:null}:{type:i.S.STORE,lat:null!==(H=null==eP?void 0:eP.lat)&&void 0!==H?H:0,lng:null!==(V=null==eP?void 0:eP.lng)&&void 0!==V?V:0,imageUrl:ek?e_:null}],eI=(0,Z.lH)(Q),eE=null!==(G=null==Q?void 0:Q.isConsumerPickup)&&void 0!==G&&G,{scheduledTimeString:eN,timeCellTimeRange:eR,selectedDeliveryOption:eM}=(0,B.Z)(!1),eD=O({scheduledTimeString:eN,isScheduledAvailable:eI,isGiftRecipientScheduling:eS,selectedDeliveryOption:eM,isNativeGiftCardOrderCart:ex,localScheduledTime:q}),{isBackendDrivenExpressTile:eO,timeOptions:ej}=j({orderCart:Q,scheduledTimeString:eN,isGiftRecipientScheduling:eS,isNativeGiftCardOrderCart:ex,hasGiftThatCanBeScheduled:eb,isSameStoreCateringEnabled:et,etaMinutesRange:eD}),eL=(0,a.Bo)(Q,"ASAP"===q),eB=Q.offersPickup&&!Q.isBundle,ew=[].concat(Q.offersDelivery?[L.L.Delivery]:[]).concat(eB?[L.L.Pickup]:[]);return{orderCart:Q,phoneNumber:(0,b.U)(Y),dropOffPreference:ev,dropOffOptions:es,dasherInstructions:ec&&w(ec),address:eT,fulfillmentType:em?eg:ef,isFulfillmentTypeLoading:em,availableFulfillmentTypes:ew,setFulfillmentType:e=>{let t=e===L.L.Pickup;eE!==t&&(eh(e),ep(e,()=>{eo(h.n57.NOT_SET),er(void 0)}),(0,k.lh)(t,t?"pickup":"delivery"))},mapMarkers:eZ,timeOptions:ej,selectedDeliveryOption:eM,setSelectedDeliveryOption:eo,setDeliveryOptionInfo:er,checkoutQueryScheduledTime:ea,orderCartId:Q.id,restaurantId:null===(I=Q.restaurant)||void 0===I?void 0:I.id,timeCellTimeRange:eR,giftSchedulingInfo:ey,isCatering:!!(null==Q?void 0:Q.isCatering),isConvenience:!!(null==Q?void 0:Q.isConvenienceCart),shouldAutoOpenModal:eL,checkoutDropoffOptions:null!==($=Q.dropoffOptions)&&void 0!==$?$:[],isBackendDrivenExpressTile:eO,offersPackageReturns:en,setLocalScheduledTime:J,isNativeGiftCardOrderCart:ex,showAccessibilityCompliance:!!Q.showAccessibilityCompliance,hasAccessibilityRequirements:!!ee,setHasAccessibilityRequirements:e=>{X("hasAccessibilityRequirements",e)}}}},755072:function(e,t,n){n.d(t,{L:function(){return r.LK5}});var i=n(512150),l=n(308198),o=n(163151),r=n(980928);t.Z=()=>{let{orderCart:e}=i.useContext(o.iB),[t,{loading:n}]=(0,l.Z)();return{fulfillmentType:e.isConsumerPickup?r.LK5.Pickup:r.LK5.Delivery,setFulfillmentType:async(n,i)=>{let o=(0,l.L)(e,n===r.LK5.Pickup,!1);await t({variables:o}),null==i||i()},isFulfillmentTypeLoading:n}}},875302:function(e,t,n){n.d(t,{Z:function(){return b}});var i=n(512150),l=n(980928),o=n(533824),r=n(459549),a=n(849810),u=n(682852),d=n(163151),s=n(670436),c=n(332210),v=e=>{var t;let{consumer:n}=(0,r.R)(),{orderCart:l}=(0,i.useContext)(d.iB),{localScheduledTime:v}=(0,i.useContext)(u.ZP),p=(0,a.bU)(),m=(0,c.EP)(),f=(null==n?void 0:null===(t=n.defaultAddress)||void 0===t?void 0:t.timezone)||m||"US/Pacific";return(0,o.fz)({locale:p,scheduledDeliveryTime:v,timezone:f,dateTimeString:(0,s.LZ)({scheduledDeliveryTime:v,locale:p,orderTimeAvailability:null==l?void 0:l.orderTimeAvailability,enableAwarenessFormat:e})})},p=n(206916),m=n(896431),f=n(824648);let g=()=>{var e;let{consumer:t}=(0,r.R)(),{orderCart:n}=(0,i.useContext)(d.iB),l=(0,a.bU)(),{midpointTimestamp:u,rangeMin:s,rangeMax:v}=(0,f.g)(n),p=(0,c.EP)(),m=(null==t?void 0:null===(e=t.defaultAddress)||void 0===e?void 0:e.timezone)||p||"US/Pacific";return(0,o.fz)({locale:l,scheduledDeliveryTime:u,timezone:m,rangeMin:s,rangeMax:v})};var h=n(803767);let y=()=>{let{orderCart:e}=(0,i.useContext)(d.iB),{selectedDeliveryOption:t}=(0,i.useContext)(p.Z),{localScheduledTime:n}=(0,i.useContext)(u.ZP),l=(0,s.Yr)(e),o=(0,s.lH)(e),r=(0,h.z)(e),a=(0,s.oj)(e);return(0,m.$)(t,{isScheduledAvailable:o,isStandardAvailable:l,isStandardDelivery:"ASAP"===n,isSameDayAvailableAndPreselected:r,isPriorityAvailableAndPreselected:a})};var b=e=>{var t,n,o,r;let{orderCart:a}=(0,i.useContext)(d.iB),{giftOptions:s}=(0,i.useContext)(u.ZP),c=y(),p=v(e),m=g(),f=null!==(t=null==a?void 0:a.isConsumerPickup)&&void 0!==t&&t?a.asapPickupTimeRange:a.asapTimeRange,h=!!(null==s?void 0:s.shouldRecipientScheduleGift),b="";return h||(b=c===l.n57.STANDARD?null!=f?f:"":c===l.n57.SCHEDULE?p:c===l.n57.FREE_SAME_DAY?m:null!==(r=null===(o=a.deliveryOptions)||void 0===o?void 0:null===(n=o.find(e=>e.deliveryOptionType===c))||void 0===n?void 0:n.etaMinutesRange)&&void 0!==r?r:""),{scheduledTimeString:p,timeCellTimeRange:b,selectedDeliveryOption:c}}},900611:function(e,t,n){n.d(t,{R:function(){return i}});let i=630},27975:function(e,t,n){n.d(t,{Z:function(){return g}});var i=n(787536);n(512150);var l=n(338772),o=n(482480);let r=n(900611).R-64,a=l.default.div.withConfig({componentId:"sc-584d8975-0"})(["height:","px;width:100%;position:relative;margin-bottom:",";"],144,o.Q2.usage.space.xxSmall),u=l.default.img.withConfig({componentId:"sc-584d8975-1"})(["width:100%;border-radius:",";object-fit:cover;position:absolute;left:0;top:0;z-index:2;"],o.Q2.usage.borderRadius.medium),d=l.default.img.withConfig({componentId:"sc-584d8975-2"})(["width:100%;border-radius:",";object-fit:cover;position:absolute;left:0;top:0;"],o.Q2.usage.borderRadius.medium);var s=n(614630),c=n(468645),v=e=>{let{lat:t,lng:n,width:i,height:l}=e,o="pin-s+f91f1f(".concat(n,",").concat(t,")");return"".concat(c.Z.mapboxStaticMapApiUrl,"/").concat(o,"/").concat(n,",").concat(t,",").concat(13.6,",").concat(0,"/").concat(i,"x").concat(l,"?access_token=").concat(c.Z.mapboxStaticMapApiToken)},p=n(866037),m=n(419826),f=n(506178),g=e=>{let{markers:t}=e,{isMobile:n}=(0,s.ac)(),l=v({lat:t[0].lat,lng:t[0].lng,height:144,width:n?896:r}),o=(0,m.n)(),c=(0,f.xQ)(p.bW.ADDRESS_PIN_MAP_VIEW,{entityType:"none"});return l?(0,i.jsxs)(a,{ref:o?c:null,children:[(0,i.jsx)(d,{src:n?"https://img.cdn4dd.com/s/managed/ordering-experience/placeholder-map_896x144.png":"https://img.cdn4dd.com/s/managed/ordering-experience/placeholder-map_566x144.png",alt:"",loading:"eager",fetchpriority:"high",height:144}),(0,i.jsx)(u,{src:l,alt:"",loading:"eager",fetchpriority:"high",height:144})]}):null}},470434:function(e,t,n){var i=n(787536),l=n(228732),o=n(824622),r=n(300491);n(512150);var a=n(23676),u=n(267769),d=n(759361),s=n(612749),c=n(829872),v=n(607084),p=n(472478),m=n(705468),f=n(318906);t.Z=e=>{let{addressEntryPoint:t,title:n="",defaultAddress:g,dropoffOptions:h,onClose:y,dropoffPreferences:b,existingDriverInstructions:S,customizations:x,onShowPinCodeEducationModal:C}=e,P="".concat(t,"/EditAddressModal"),{isAddressLabelEnabled:A}=(0,c.Z)(),T=(0,m.uh)(),_=(0,s.c)(),k=(0,f.i)(),{editAddress:Z,res:{loading:I}}=T?_:k;return(0,i.jsxs)(i.Fragment,{children:[A&&(0,i.jsx)(d.Z,{addressEntryPoint:P,title:n,address:g,defaultAddressId:g.id,dropoffOptions:h,driverInstructions:S,dropoffPreferences:b,onClose:y,customizations:x,testId:p.Z.editAddressModal}),(0,i.jsx)(l.Z,{isOpen:!A,title:n,hasCloseButton:!0,onClose:y,"data-testid":p.Z.editAddressModal,children:(0,i.jsx)(o.Z,{isVisible:I,type:r.j.loading,children:(0,i.jsx)(v.n,{children:(0,i.jsx)(a.Z,{dropoffPreferences:b,dropoffOptions:h,driverInstructions:S,onCancel:y,handleSubmitEditAddress:e=>{let{subpremise:t,driverInstructions:n,dropoffOptionId:i,addressId:l,manualLat:o,manualLng:r,buildingName:a,entryCode:d,personalAddressLabel:s}=e;return Z({subpremise:t,driverInstructions:n,dropoffOptionId:i,addressId:l,manualLat:o,manualLng:r,buildingName:a,entryCode:d,personalAddressLabel:s}).then(e=>{var t,n;y(),(0,u.Hz)({addressId:l,dropoffOptionId:i,manualLat:o,manualLng:r,addressEntryPoint:P,addressToUpdate:g,editResponse:T?null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.editConsumerAddressV2:null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.editConsumerAddress})})},address:g,handleSubmitNewAddress:()=>void 0,customizations:x,onShowPinCodeEducationModal:C})})})})]})}},464108:function(e,t,n){n.d(t,{Z:function(){return A}});var i=n(787536),l=n(95485),o=n(228732),r=n(620222),a=n(366724),u=n(512150),d=n(401296),s=n(896970),c=n(378093),v=n(361040),p=n(118700),m=n(523328),f=n(760476),g=n(706443),h=n(221686),y=n(338772),b=n(431933),S=n(482480);let x=y.default.div.withConfig({componentId:"sc-51a58c6e-0"})(["display:flex;justify-content:flex-end;margin-top:calc("," + ",");"],S.Q2.usage.space.xLarge,S.Q2.usage.space.xSmall),C=y.default.div.withConfig({componentId:"sc-51a58c6e-1"})(["margin-left:",";"],S.Q2.usage.space.xSmall);var P=e=>{let{phoneNumber:t,phoneFieldCountry:n,internationalPhoneNumber:o,onSave:r,onCancel:a,buttonState:d,onButtonSuccessAnimation:s,error:c}=e,[y,S]=u.useState({phoneNumber:t,phoneFieldCountry:n,internationalPhoneNumber:o}),P=(e,t,n)=>{if((0,b.H)(t))return;let i={phoneNumber:e};(null==t?void 0:t.number)&&(i.internationalPhoneNumber=t.number.number),i.phoneFieldCountry=n||y.phoneFieldCountry,S(i)},A=y.internationalPhoneNumber&&(0,h.y)(y.internationalPhoneNumber),T=c?v.ZP.t("checkoutStrings_phonePanel_networkError"):A?"":v.ZP.t("checkoutStrings_phonePanel_invalidFormat");return(0,i.jsxs)(u.Fragment,{children:[(0,i.jsx)(f.Z,{"data-testid":"EditPhoneNumberPhoneField",isInternationalEnabled:!0,label:v.ZP.t("profilePageStrings_phoneNumber"),countryLabel:v.ZP.t("profilePageStrings_countries_country"),value:y.phoneNumber,onChange:(e,t)=>P(e,t,void 0),onCountryChange:(e,t,n)=>P(t,n,e),currentCountry:y.phoneFieldCountry,error:T,availableCountries:g.L}),(0,i.jsxs)(x,{children:[(0,i.jsx)(m.Z,{isInline:!0,type:l.L$.tertiary,onClick:()=>{(0,p.j)("web_phone_cancel"),a()},children:v.ZP.t("checkoutStrings_phonePanel_modal_cancel")}),(0,i.jsx)(C,{children:(0,i.jsx)(m.Z,{"data-testid":"EditPhoneNumberButton",isInline:!0,type:l.L$.primary,onClick:()=>{(0,p.j)("web_phone_continue_tapped"),r(y)},isDisabled:y.internationalPhoneNumber===o||!A,state:d,onAnimationEnd:e=>{"SUCCESS"===e&&s()},children:v.ZP.t("checkoutStrings_phonePanel_modal_continue")})})]})]})},A=e=>{let{onClose:t,consumer:n}=e,{dispatch:m}=u.useContext(a.RiskContext),f=(0,d.RI)(n.phoneNumberComponents,"nationalNumber"),g=(0,d.RI)(n.phoneNumberComponents,"countryShortname"),h=(0,d.RI)(n.phoneNumberComponents,"internationalNumber"),[y,b]=u.useState(l.BN.default),[S,x]=u.useState(!1),C=()=>{t()},A=(e,t)=>{x(!1),b(l.BN.loading),e(void 0,void 0,(0,d.Rf)(t.internationalPhoneNumber||null,h),void 0,void 0,void 0).then(()=>{b(l.BN.success),(0,p.j)("web_phone_save_success")}).catch(e=>{(0,p.j)("web_phone_save_failure"),b(l.BN.default);let n=(0,c.E)(e),i=(0,c.z)(e);"DOORDASH_MFA_ERROR"===n?m({type:i,workflow:i===a.RiskActions.PhoneEmailVerify?a.RiskWorkflows.PhoneVerificationProfileUpdate:a.RiskWorkflows.EditPhoneOnCheckout,config:{enableCloseConfirmation:!1,enablePhoneNumberUpdate:!1,enableVoIPWarning:!0},experiments:{riskMFAResendThrottle:i===a.RiskActions.PhoneEmailVerify,isCodeViaCallEnabled:i===a.RiskActions.PhoneEmailVerify,isCodeViaCallTimerEnabled:i===a.RiskActions.PhoneEmailVerify,isConfigEnabled:i===a.RiskActions.PhoneEmailVerify},payload:{userDetail:i===a.RiskActions.PhoneEmailVerify?{phoneNumber:t.internationalPhoneNumber}:void 0}}):x(!0)})},T=(e,t)=>{m({type:a.RiskActions.RegisterCallback,onClose:()=>(0,p.j)("web_phone_cancel"),onSuccess:()=>A(e,t)}),A(e,t)};return(0,i.jsx)(s.ZP,{children:e=>(0,i.jsx)(o.Z,{isOpen:!0,onClose:t,size:r.C.medium,title:v.ZP.t("checkoutStrings_phonePanel_modal_title"),children:(0,i.jsx)(P,{phoneNumber:f,phoneFieldCountry:g,internationalPhoneNumber:h,onSave:t=>T(e,t),onCancel:t,buttonState:y,onButtonSuccessAnimation:C,error:S})})})}},932728:function(e,t,n){var i=n(787536);n(512150);var l=n(448627),o=n(305032),r=n(345802),a=n(927330),u=n(150442),d=n(539687),s=n(382263);t.Z=e=>{let{title:t,subtext:n,iconType:c,onClick:v,renderAboveContent:p,renderBelowContent:m,trailingMetadata:f}=e,{isMobile:g}=(0,l.s)();return(0,i.jsx)(u.Z,{insetHorizontalSize:g?d.wM.none:d.wM.medium,insetVerticalSize:d.wM.medium,leadingIcon:{type:c,size:o.J.medium,isInteractive:!1},label:(0,i.jsx)(r.x,{children:t}),description:n&&(0,i.jsx)(r.x,{textStyle:a.TextStyle.label.small.default,color:a.d9.text.subdued.default,children:n}),trailingIcon:v&&{type:s.IconType.ChevronRight,size:o.J.medium,isInteractive:!1},onClick:v,renderAboveContent:p,renderBelowContent:m,trailingMetadata:f})}},472478:function(e,t){t.Z={itemDetails:"checkoutItemDetails",itemDetailsWrapper:"checkoutItemDetailsWrapper",submitPanel:"checkoutSubmitPanel",editAddressModal:"checkoutEditAddressModal",checkoutTotalSavings:"checkoutTotalSavings"}},226149:function(e,t,n){var i=n(787536);n(512150);var l=n(16211),o=n(361040),r=n(927330),a=n(345802),u=n(849810);t.Z=e=>{let{unitAmount:t,currency:n,color:d=r.d9.text.subdued.default,textStyle:s=r.TextStyle.body.small.strong}=e,c=(0,u.bU)();return(0,i.jsx)(a.x,{color:d,textStyle:s,children:o.ZP.t("checkoutStrings_companyPayBudgetAmountRemaining",{budgetAmount:(0,l.kI)(c,t,n)})})}},508170:function(e,t,n){n.d(t,{Z:function(){return L}});var i=n(787536),l=n(512150),o=n(228732),r=n(150442),a=n(600205),u=n(382263),d=n(539687),s=n(165066),c=n(748742),v=n(615777),p=n(482480);let m=n(338772).default.div.withConfig({componentId:"sc-419d2b47-0"})(["margin:0 calc(-1 * ",");"],p.Q2.usage.space.medium);var f=n(933844),g=n.n(f),h=n(824075),y=n(691596),b=n(724318),S=n(16211),x=n(980928),C=n(849810),P=n(443561),A=n(779193),T=n(345802),_=n(927330),k=n(361040),Z=n(664174),I=e=>{var t;let{budget:n}=e,o=(0,C.bU)(),r=(0,h.y)(y.pc.ddfbBudgetAddressRestriction,!1),a=(null===(t=n.budgetAddress)||void 0===t?void 0:t.printableAddress)?n.budgetAddress.printableAddress:k.ZP.t("checkoutStrings_companyPayAnyAddress"),u=(e,t)=>x._iw.DAILY===t?k.ZP.t("checkoutStrings_companyPayBudgetPerDay",{budgetAmount:e}):x._iw.WEEKLY===t?k.ZP.t("checkoutStrings_companyPayBudgetPerWeek",{budgetAmount:e}):x._iw.MONTHLY===t?k.ZP.t("checkoutStrings_companyPayBudgetPerMonth",{budgetAmount:e}):e;return(0,i.jsxs)(l.Fragment,{children:[(0,i.jsx)(P.Z,{size:d.$f.xSmall}),(0,i.jsxs)(A.Z,{size:d.Uo.xxSmall,children:[(0,i.jsx)(T.x,{color:_.d9.text.subdued.default,textStyle:_.TextStyle.body.small.default,children:(()=>{let e="";if(n.refreshInterval===x._iw.ONE_TIME){let t=n.expireDate?parseInt(n.expireDate,10):0;e=k.ZP.t("checkoutStrings_companyPayExpiringOnDate",{expireDate:g()(t,"X").format("MMM DD, YYYY")})}else{var t,i;e=u((0,S.kI)(o,null===(t=n.maximumAmount)||void 0===t?void 0:t.unitAmount,null===(i=n.maximumAmount)||void 0===i?void 0:i.currency),n.refreshInterval)}return e})()}),(0,i.jsx)(T.x,{color:_.d9.text.subdued.default,textStyle:_.TextStyle.body.small.default,children:(0,b.oC)(n.availabilities)}),(0,i.jsx)(T.x,{color:_.d9.text.subdued.default,textStyle:_.TextStyle.body.small.default,children:r?(()=>{if(!n.budgetAddressList||0===n.budgetAddressList.length)return k.ZP.t("checkoutStrings_companyPayAnyAddress");if(1===n.budgetAddressList.length){var e;return(0,Z.u)((null===(e=n.budgetAddressList[0])||void 0===e?void 0:e.printableAddress)||"")}return k.ZP.t("checkoutStrings_companyPayMultipleAddresses")})():a})]})]})},E=n(83371),N=n(769173),R=n(226149),M=n(545500),D=n(118700),O=n(614630),j=n(266506),L=e=>{let{orderCartId:t,selectedBudgetId:n,eligibleBudgets:f,ineligibleBudgets:g,onCancel:h,onSave:y,isOpen:b}=e,{isMobile:S}=(0,O.ac)(),[x,C]=l.useState(n);return(0,i.jsxs)(o.Z,{isOpen:b,title:k.ZP.t("checkoutStrings_companyPaySelectABudget"),onClose:h,primaryAction:{text:k.ZP.t("checkoutStrings_companyPaySave"),onClick:()=>{(0,D.j)(M.q.TapSaveBudget,{cart_id:t,budget_id:x}),y(x)}},secondaryAction:{text:k.ZP.t("checkoutStrings_companyPayCancel"),onClick:h},useHairlineDividers:!0,children:[(0,i.jsx)(j.Z,{horizontalSize:d.wM.small,verticalSize:d.wM.legacyMedium,children:(0,i.jsx)(T.x,{textStyle:_.TextStyle.title.medium,children:k.ZP.t("checkoutStrings_companyPayEligibleMealBudgets")})}),(0,i.jsx)(s.Z,{type:c.C.fullBorder}),f.map((e,t)=>{var n,l;return(0,i.jsx)(r.Z,{"data-testid":N.u.ChooseBudgetsModalEligibleBudgets,"data-anchor-id":"".concat(E.Pt.companyPaysChooseBudgetOption,"-").concat(e.id),accessibilityRole:"radio",iconVerticalAlignment:a.Ao.flexStart,leadingIcon:e.id===x?{type:u.IconType.RadioOnCircleFill,isInteractive:!1}:{type:u.IconType.RadioOffCircleLine,isInteractive:!1},insetSize:d.wM.large,isToggleable:!0,isToggled:e.id===x,toggledColor:p.Q2.usage.color.text.default,onClick:()=>C(e.id),label:(0,i.jsx)(T.x,{textStyle:_.TextStyle.label.large.strong,children:e.name}),labelMaxLines:3,trailingMetadata:S?"":(0,i.jsx)(R.Z,{unitAmount:null===(n=e.remainingAmount)||void 0===n?void 0:n.unitAmount,currency:null===(l=e.remainingAmount)||void 0===l?void 0:l.currency,color:_.d9.highlight.default}),description:(0,i.jsx)(I,{budget:e}),descriptionMaxLines:5,separatorType:c.C.fullBorder,isSeparatorVisible:t!==f.length-1,renderBelowContent:()=>{var t,n;return S?(0,i.jsx)(j.Z,{verticalSize:d.wM.xSmall,horizontalSize:d.wM.none,children:(0,i.jsx)(R.Z,{unitAmount:null===(t=e.remainingAmount)||void 0===t?void 0:t.unitAmount,currency:null===(n=e.remainingAmount)||void 0===n?void 0:n.currency,color:_.d9.highlight.default})}):(0,i.jsx)(i.Fragment,{})}},e.id)}),!!(null==g?void 0:g.length)&&(0,i.jsxs)(l.Fragment,{children:[(0,i.jsx)(m,{children:(0,i.jsx)(P.Z,{size:d.$f.large,children:(0,i.jsx)(s.Z,{separatorHeight:v.NY.small})})}),(0,i.jsx)(j.Z,{horizontalSize:d.wM.small,verticalSize:d.wM.xxSmall,children:(0,i.jsx)(T.x,{textStyle:_.TextStyle.title.medium,children:k.ZP.t("checkoutStrings_companyPayIneligibleMealBudgets")})}),g.map((e,t)=>{var n,l;return(0,i.jsx)(r.Z,{"data-testid":N.u.ChooseBudgetsModalIneligibleBudgets,insetHorizontalSize:d.wM.small,label:(0,i.jsx)(T.x,{color:_.d9.text.subdued.default,textStyle:_.TextStyle.label.large.strong,children:e.name}),trailingMetadata:(0,i.jsx)(R.Z,{unitAmount:null===(n=e.remainingAmount)||void 0===n?void 0:n.unitAmount,currency:null===(l=e.remainingAmount)||void 0===l?void 0:l.currency}),description:(0,i.jsx)(I,{budget:e}),descriptionMaxLines:5,separatorType:c.C.fullBorder,isSeparatorVisible:t!==g.length-1},e.id)})]})]})}},16211:function(e,t,n){n.d(t,{TA:function(){return a},g0:function(){return u},iu:function(){return r},kI:function(){return o}});var i=n(42976),l=n(435732);let o=(e,t,n)=>(0,i.lb)({unitAmount:t||0,currency:null!=n?n:l.N.USD,userLocale:e}),r=e=>e.filter(e=>{var t;return(null===(t=e.remainingAmount)||void 0===t?void 0:t.unitAmount)&&e.remainingAmount.unitAmount>0}),a=e=>e.filter(e=>{var t;return!(null===(t=e.remainingAmount)||void 0===t?void 0:t.unitAmount)||e.remainingAmount.unitAmount<=0}),u=(e,t)=>e.find(e=>e.id===t)||null},769173:function(e,t,n){var i,l;n.d(t,{u:function(){return i}}),(l=i||(i={})).ChooseBudgetsModalEligibleBudgets="ChooseBudgetsModalEligibleBudgets",l.ChooseBudgetsModalIneligibleBudgets="ChooseBudgetsModalIneligibleBudgets",l.ExpensedMealBudgetOptOutToggle="ExpensedMealBudgetOptOutToggle",l.ExpensedMealBudgetContainer="ExpensedMealBudgetContainer",l.ExpensedMealBudgetWarningBanner="ExpensedMealBudgetWarningBanner",l.BudgetInfoCell="BudgetInfoCell",l.GroupCartParticipantCheckoutDisclaimerBanner="GroupCartParticipantCheckoutDisclaimerBanner"},545500:function(e,t,n){var i,l;n.d(t,{q:function(){return i}}),(l=i||(i={})).ToggleCompanyPayment="toggle_company_payment",l.OpenBudgetSelection="open_budget_selection",l.TapSaveBudget="tap_save_budget"},105678:function(e,t,n){n.d(t,{DW:function(){return l},a$:function(){return r},qC:function(){return o}});var i=n(980928);let l=e=>{var t;if(!e||0===e.length)return i.VCv.NONE;let n=e.find(e=>"1"===e.id);return null!==(t=null==n?void 0:n.proofOfDeliveryType)&&void 0!==t?t:i.VCv.NONE},o=e=>e===i.VCv.SIGNATURE,r=(e,t)=>{var n,i;if(!o(l(e)))return!1;let r=null==t?void 0:null===(i=t.dropoffPreferences)||void 0===i?void 0:null===(n=i.allPreferences)||void 0===n?void 0:n.find(e=>e.isDefault);return(null==r?void 0:r.optionId)!=="1"}},824648:function(e,t,n){n.d(t,{g:function(){return l}});var i=n(980928);let l=e=>{var t,n,l,o,r,a,u;let{deliveryOptions:d}=e,s=null==d?void 0:d.find(e=>e.deliveryOptionType===i.n57.FREE_SAME_DAY),c=null==s?void 0:null===(l=s.availableDaysList)||void 0===l?void 0:null===(n=l[0])||void 0===n?void 0:null===(t=n.timeWindowsList)||void 0===t?void 0:t[0];return{displayString:null!==(o=null==c?void 0:c.displayString)&&void 0!==o?o:"",rangeMin:null!==(r=null==c?void 0:c.rangeMin)&&void 0!==r?r:"",rangeMax:null!==(a=null==c?void 0:c.rangeMax)&&void 0!==a?a:"",midpointTimestamp:null!==(u=null==c?void 0:c.midpointTimestamp)&&void 0!==u?u:""}}},419826:function(e,t,n){n.d(t,{n:function(){return o}});var i=n(824075),l=n(691596);let o=()=>(0,i.y)(l.pc.cxWebStoreCoreFunneM2ATS,!1)},148311:function(e,t,n){n.d(t,{J:function(){return r},U:function(){return a}});var i=n(459549),l=n(691596),o=n(824075);let r=()=>{var e;let{consumer:t}=(0,i.R)(),n=(null==t?void 0:null===(e=t.defaultAddress)||void 0===e?void 0:e.countryCode)||"";return!new Set(["NZ"]).has(n)},a=()=>(0,o.y)(l.pc.mealGiftingRecipientToSchedule,!1)},33510:function(e,t,n){var i=n(336494),l=n(74800),o=n(814116),r=n(804794),a=n(993957),u=n(487716),d=n(849810);function s(){let e=(0,i._)(["\n  mutation updateCartGiftInfo($updateCartGiftInfoInput: UpdateCartGiftInfoInput!) {\n    updateCartGiftInfo(updateCartGiftInfoInput: $updateCartGiftInfoInput)\n  }\n"]);return s=function(){return e},e}let c=(0,l.Ps)(s());t.Z=()=>{let e=(0,d.bU)(),[t]=(0,r.D)(c);return n=>{let{cartId:i,giftOptions:l,isMerchantShipping:r=!1,updateApolloCache:d=!0,updateSavedGiftInfoContext:s,refetchQueries:c}=n,v={...(0,o.tT)(l,e),hasGiftIntent:l.hasGiftIntent||null},{savedGiftInfo:p={},updateSavedGiftInfo:m=null}=s||{};return null==m||m(v),t({variables:{updateCartGiftInfoInput:{cartId:i,...v}},...c?{refetchQueries:c}:{},...d?{update:(t,n)=>{let{data:l}=n;(0,u.Y9)({cache:t,data:l,cartId:i,newUpdateCartGiftInfoInput:v,locale:e})}}:{}}).then(e=>{var t;let n=(null===(t=e.data)||void 0===t?void 0:t.updateCartGiftInfo)===!0;if((0,a.Ep)({isMerchantShipping:r,isRemove:!1,isSuccessful:n}),!n)throw null==m||m(p),Error("unable to save gift info to cart")})}}},896970:function(e,t,n){n.d(t,{Hi:function(){return s}});var i=n(336494),l=n(787536),o=n(804794),r=n(96129),a=n(74800);function u(){let e=(0,i._)(["\n  mutation editConsumerProfileInformation(\n    $firstName: String\n    $lastName: String\n    $email: String\n    $phoneNumber: String\n    $defaultCountry: String\n    $receiveTextNotifications: Boolean\n  ) {\n    updateConsumerProfileInformation(\n      firstName: $firstName\n      lastName: $lastName\n      email: $email\n      phoneNumber: $phoneNumber\n      defaultCountry: $defaultCountry\n      receiveTextNotifications: $receiveTextNotifications\n    ) {\n      id\n      firstName\n      lastName\n      email\n      phoneNumber\n      phoneNumberComponents {\n        formattedNationalNumber\n        nationalNumber\n        formattedInternationalNumber\n        countryCode\n        internationalNumber\n        countryShortname\n      }\n      defaultCountry\n      receiveTextNotifications\n    }\n  }\n"]);return u=function(){return e},e}n(512150);let d=(0,a.Ps)(u()),s=()=>{let[e]=(0,o.D)(d);return e};t.ZP=e=>{let{children:t}=e;return(0,l.jsx)(r.m,{mutation:d,children:(e,n)=>t((t,n,i,l,o,r)=>e({variables:{firstName:t,lastName:n,phoneNumber:i,email:l,defaultCountry:o,receiveTextNotifications:r}}),n)})}},852842:function(e,t,n){var i=n(787536),l=n(512150);t.Z=e=>{let{children:t,isSelected:n=!1,behavior:o="auto",styles:r,testId:a}=e,u=l.useRef(null);return l.useEffect(()=>{var e,t;null!==u.current&&void 0!==u.current&&n&&(null===(e=(t=u.current).scrollIntoView)||void 0===e||e.call(t,{behavior:o,block:"nearest",inline:"nearest"}))},[u,n,o]),(0,i.jsx)("div",{ref:u,style:r,"data-testid":a,children:t})}},378093:function(e,t,n){n.d(t,{E:function(){return i},z:function(){return l}});let i=e=>{var t,n;return null==e?void 0:null===(n=e.graphQLErrors[0])||void 0===n?void 0:null===(t=n.extensions)||void 0===t?void 0:t.code},l=e=>{var t,n,i;return null==e?void 0:null===(i=e.graphQLErrors[0])||void 0===i?void 0:null===(n=i.extensions)||void 0===n?void 0:null===(t=n.exception)||void 0===t?void 0:t.code}},26556:function(e,t,n){n.d(t,{U:function(){return l}});var i=n(504050);let l=e=>{let t=null==e?void 0:e.phoneNumberComponents,n=null==t?void 0:t.internationalNumber;return(null==t?void 0:t.formattedNationalNumber)||(0,i.c$)(n)||(null==t?void 0:t.nationalNumber)||""}},431933:function(e,t,n){n.d(t,{H:function(){return i}});let i=e=>"string"==typeof e}}]);
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="ba9492d7-2366-57c1-9de5-8e9ff20eae9e")}catch(e){}}()
//# debugId=ba9492d7-2366-57c1-9de5-8e9ff20eae9e
//# sourceMappingURL=30429-4fcd814f1734b31e.js.map
